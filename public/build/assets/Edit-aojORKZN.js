import{r as _,j as e}from"./react-BhzSerM2.js";import{A as D}from"./AppShell-hblPOeic.js";import{C as n,a as o,b as d,c as m,d as p}from"./Card-Cf3anJdB.js";import{B as i}from"./app-CHptu5EX.js";import{B as I}from"./Badge-DOejrt-x.js";import{T as c}from"./TextInput-DRXLElIV.js";import{I as l}from"./InputLabel-qVeuR0hO.js";import{I as v}from"./InputError-6mWSc7R2.js";import{G as L,H,l as k,N as F,ay as C,ax as M,g as R,e as S}from"./vendor-DxGhd0kb.js";import{u as U}from"./useNotifications-BfTnFHM2.js";import"./Topbar-DAizFNof.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./useToast-m6H8bvjE.js";import"./BrandingWrapper-DK418oSm.js";import"./Alert-B2z6wKx8.js";import"./CookieConsentBanner-BIdbL3YD.js";/* empty css            */function ie({account:z,widget:r,connections:y,stats:h,embed:x}){const g=r.slug||r.id,{confirm:W,toast:f}=U(),{data:a,setData:t,put:T,processing:A,errors:u}=L({name:r.name,whatsapp_connection_id:r.whatsapp_connection_id??"",whatsapp_phone:r.whatsapp_phone??"",position:r.position,welcome_message:r.welcome_message??"",theme:{primary:r.theme?.primary??"#25D366",background:r.theme?.background??"#075E54"},show_on:{include:(r.show_on?.include??[]).join(`
`),exclude:(r.show_on?.exclude??[]).join(`
`)},is_active:r.is_active}),[b,w]=_.useState(null);_.useEffect(()=>{if(!a.whatsapp_connection_id)return;const s=y.find(j=>String(j.id)===String(a.whatsapp_connection_id));s?.business_phone&&!a.whatsapp_phone&&t("whatsapp_phone",s.business_phone)},[a.whatsapp_connection_id]);const B=s=>{s.preventDefault(),T(route("app.floaters.update",{widget:g}))},E=()=>{S.post(route("app.floaters.toggle",{widget:g}))},P=async()=>{await W({title:"Delete Widget",message:"Are you sure you want to delete this widget? This action cannot be undone.",variant:"danger"})&&S.delete(route("app.floaters.destroy",{widget:g}),{onSuccess:()=>f.success("Widget deleted"),onError:()=>f.error("Failed to delete widget")})},N=(s,j)=>{navigator.clipboard.writeText(s),w(j),setTimeout(()=>w(null),2e3)};return e.jsxs(D,{children:[e.jsx(H,{title:`Widget Â· ${r.name}`}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(k,{href:route("app.floaters",{}),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-4",children:[e.jsx(F,{className:"h-4 w-4"}),"Back to Widgets"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.name}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Manage widget settings and copy the embed snippet."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{variant:r.is_active?"success":"default",children:r.is_active?"Active":"Paused"}),e.jsx(i,{variant:"secondary",onClick:E,children:r.is_active?"Pause":"Activate"}),e.jsx(i,{variant:"danger",onClick:P,children:"Delete"})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[{label:"Impressions",value:h.impressions},{label:"Clicks",value:h.clicks},{label:"Leads",value:h.leads}].map(s=>e.jsx(n,{className:"border-0 shadow-sm",children:e.jsxs(o,{className:"p-5",children:[e.jsx("p",{className:"text-xs uppercase tracking-wider text-gray-500",children:s.label}),e.jsx("p",{className:"mt-2 text-2xl font-semibold text-gray-900 dark:text-gray-100",children:s.value}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Last 30 days"})]})},s.label))}),e.jsxs(n,{className:"border-0 shadow-lg",children:[e.jsxs(d,{children:[e.jsx(m,{children:"Embed Code"}),e.jsx(p,{children:"Paste this script into your website."})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-900 p-3 text-xs text-gray-600 dark:text-gray-300",children:x.snippet}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(i,{variant:"secondary",onClick:()=>N(x.snippet,"snippet"),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),b==="snippet"?"Copied":"Copy Snippet"]}),e.jsxs(i,{variant:"secondary",onClick:()=>N(x.script,"script"),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),b==="script"?"Copied":"Copy Script URL"]})]})]})]}),e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs(n,{className:"border-0 shadow-lg",children:[e.jsxs(d,{children:[e.jsx(m,{children:"Widget Details"}),e.jsx(p,{children:"Update widget settings."})]}),e.jsxs(o,{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Widget Name"}),e.jsx(c,{value:a.name,onChange:s=>t("name",s.target.value),className:"mt-1 w-full"}),e.jsx(v,{message:u.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"WhatsApp Connection (optional)"}),e.jsxs("select",{value:a.whatsapp_connection_id,onChange:s=>t("whatsapp_connection_id",s.target.value),className:"mt-1 w-full rounded-xl border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm",children:[e.jsx("option",{value:"",children:"Select connection"}),y.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"WhatsApp Phone"}),e.jsx(c,{value:a.whatsapp_phone,onChange:s=>t("whatsapp_phone",s.target.value),className:"mt-1 w-full"}),e.jsx(v,{message:u.whatsapp_phone,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Welcome Message"}),e.jsx(c,{value:a.welcome_message,onChange:s=>t("welcome_message",s.target.value),className:"mt-1 w-full"}),e.jsx(v,{message:u.welcome_message,className:"mt-2"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Position"}),e.jsxs("select",{value:a.position,onChange:s=>t("position",s.target.value),className:"mt-1 w-full rounded-xl border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm",children:[e.jsx("option",{value:"bottom-right",children:"Bottom right"}),e.jsx("option",{value:"bottom-left",children:"Bottom left"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-6",children:[e.jsx("input",{type:"checkbox",checked:a.is_active,onChange:s=>t("is_active",s.target.checked)}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Widget is active"})]})]})]})]}),e.jsxs(n,{className:"border-0 shadow-lg",children:[e.jsxs(d,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx(m,{children:"Theme"})]}),e.jsx(p,{children:"Customize the bubble colors."})]}),e.jsxs(o,{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("input",{type:"color",value:a.theme.primary,onChange:s=>t("theme",{...a.theme,primary:s.target.value}),className:"h-10 w-14 rounded-lg border border-gray-200"}),e.jsx(c,{value:a.theme.primary,onChange:s=>t("theme",{...a.theme,primary:s.target.value}),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Header Background"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("input",{type:"color",value:a.theme.background,onChange:s=>t("theme",{...a.theme,background:s.target.value}),className:"h-10 w-14 rounded-lg border border-gray-200"}),e.jsx(c,{value:a.theme.background,onChange:s=>t("theme",{...a.theme,background:s.target.value}),className:"flex-1"})]})]})]})]}),e.jsxs(n,{className:"border-0 shadow-lg",children:[e.jsxs(d,{children:[e.jsx(m,{children:"Page Targeting"}),e.jsx(p,{children:"Show or hide the widget on specific pages (one per line, supports * wildcard)."})]}),e.jsxs(o,{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Show on"}),e.jsx("textarea",{value:a.show_on.include,onChange:s=>t("show_on",{...a.show_on,include:s.target.value}),className:"mt-1 w-full rounded-xl border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm min-h-[120px]",placeholder:`/pricing
/blog/*`})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Hide on"}),e.jsx("textarea",{value:a.show_on.exclude,onChange:s=>t("show_on",{...a.show_on,exclude:s.target.value}),className:"mt-1 w-full rounded-xl border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm min-h-[120px]",placeholder:`/privacy
/terms`})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx(k,{href:route("app.floaters",{}),children:e.jsx(i,{variant:"secondary",children:"Cancel"})}),e.jsxs(i,{type:"submit",disabled:A,className:"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})]})}export{ie as default};
