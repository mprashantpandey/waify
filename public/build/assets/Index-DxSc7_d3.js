import{r as o,j as e}from"./react-B_HteL0F.js";import{H as U,v as P,f as H,w as b,x as z,y as Y,B as q,e as t,o as J,D as O,E as G}from"./vendor-GYTC5Pip.js";import{A as K}from"./AppShell-HrBHfcoG.js";import{C as v,a as j,b as y,d as N,c as w}from"./Card-CUbeq4wI.js";import{B as d}from"./Topbar-CPirX8py.js";import{B as i}from"./app-C0WBMkkY.js";import{I as Q}from"./Input--upXiJB3.js";import{L as S}from"./Label-Drek3p_W.js";import{u as V}from"./useNotifications-TrBdqubX.js";import"./GlobalFlashHandler-DpywDQft.js";import"./useToast-Rch7lQVh.js";import"./BrandingWrapper-DIBfDp2T.js";/* empty css            */function ce({workspace:l,members:k,can_manage:c,current_user_id:C,pending_invites:m}){const{confirm:n,toast:r}=V(),[x,I]=o.useState(""),[u,R]=o.useState("member"),[E,h]=o.useState(!1),[M,f]=o.useState(null),D=()=>{if(!x||!u){r.error("Please fill in all fields");return}t.post(route("app.team.invite",{workspace:l.slug}),{email:x,role:u},{onSuccess:()=>{r.success("Member invited successfully"),I(""),R("member"),h(!1)},onError:s=>{s.email?r.error(s.email):r.error("Failed to invite member")}})},T=async(s,a)=>{if(s.role===a)return;await n({title:"Update Role",message:`Change ${s.name}'s role to ${a}?`,variant:"info"})&&t.post(route("app.team.update-role",{workspace:l.slug,user:s.id}),{role:a},{onSuccess:()=>{r.success("Role updated successfully"),f(null)},onError:()=>{r.error("Failed to update role")}})},A=async s=>{await n({title:"Remove Member",message:`Are you sure you want to remove ${s.name} from this workspace?`,variant:"danger",confirmText:"Remove"})&&t.delete(route("app.team.remove",{workspace:l.slug,user:s.id}),{onSuccess:()=>{r.success("Member removed successfully"),t.reload({only:["members"]})},onError:()=>{r.error("Failed to remove member")}})},F=async s=>{await n({title:"Revoke Invitation",message:`Revoke invitation for ${s.email}?`,variant:"danger",confirmText:"Revoke"})&&t.delete(route("app.team.invites.revoke",{workspace:l.slug,invitation:s.id}),{onSuccess:()=>{r.success("Invitation revoked successfully")},onError:()=>{r.error("Failed to revoke invitation")}})},$=async s=>{if(s.expires_at&&new Date(s.expires_at)>new Date){r.error("You can resend after the invite expires.");return}await n({title:"Resend Invitation",message:`Resend invitation to ${s.email}?`,variant:"info",confirmText:"Resend"})&&t.post(route("app.team.invites.resend",{workspace:l.slug,invitation:s.id}),{},{onSuccess:()=>{r.success("Invitation resent successfully")},onError:()=>{r.error("Failed to resend invitation")}})},B=s=>{if(!s.expires_at)return null;const a=new Date(s.expires_at),g=new Date;if(a<=g)return{label:"Expired",variant:"danger",daysLeft:0,expired:!0};const L=a.getTime()-g.getTime(),p=Math.max(1,Math.ceil(L/(1e3*60*60*24)));return{label:`Expires in ${p} day${p===1?"":"s"}`,variant:"warning",daysLeft:p,expired:!1}},_=(s,a)=>a?e.jsxs(d,{variant:"warning",className:"flex items-center gap-1.5 px-3 py-1",children:[e.jsx(J,{className:"h-3.5 w-3.5"}),"Owner"]}):s==="admin"?e.jsxs(d,{variant:"info",className:"flex items-center gap-1.5 px-3 py-1",children:[e.jsx(O,{className:"h-3.5 w-3.5"}),"Admin"]}):e.jsxs(d,{variant:"default",className:"flex items-center gap-1.5 px-3 py-1",children:[e.jsx(G,{className:"h-3.5 w-3.5"}),"Member"]});return e.jsxs(K,{children:[e.jsx(U,{title:"Team"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Team"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Manage your workspace team members"})]}),c&&e.jsxs(i,{onClick:()=>h(!0),className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/50",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Invite Member"]})]}),E&&e.jsxs(v,{className:"border-0 shadow-xl",children:[e.jsxs(j,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Invite Team Member"]}),e.jsx(N,{children:"Invite a user to join this workspace"})]}),e.jsxs(w,{className:"space-y-5 pt-6",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"email",className:"text-sm font-semibold",children:"Email Address"}),e.jsx(Q,{id:"email",type:"email",value:x,onChange:s=>I(s.target.value),placeholder:"user@example.com",className:"mt-2"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 flex items-center gap-1",children:[e.jsx(b,{className:"h-3 w-3"}),"User must already have an account"]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"role",className:"text-sm font-semibold",children:"Role"}),e.jsxs("select",{id:"role",value:u,onChange:s=>R(s.target.value),className:"mt-2 w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 px-4 py-2.5",children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsx(i,{onClick:D,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",children:"Send Invitation"}),e.jsx(i,{variant:"secondary",onClick:()=>h(!1),className:"flex-1",children:"Cancel"})]})]})]}),c&&m&&m.length>0&&e.jsxs(v,{className:"border-0 shadow-xl",children:[e.jsxs(j,{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20",children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"}),"Pending Invitations"]}),e.jsx(N,{children:"Invitations that are waiting for acceptance"})]}),e.jsx(w,{className:"pt-6 space-y-3",children:m.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-amber-100 dark:border-amber-900/40 bg-white dark:bg-gray-900 px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s.email}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Role: ",s.role,s.expires_at?` â€¢ Expires ${new Date(s.expires_at).toLocaleDateString()}`:""]}),s.expires_at&&e.jsx("div",{className:"mt-1",children:(()=>{const a=B(s);return a?e.jsx(d,{variant:a.variant,className:"text-xs",children:a.label}):null})()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{variant:"secondary",size:"sm",onClick:()=>$(s),disabled:s.expires_at?new Date(s.expires_at)>new Date:!1,children:"Resend"}),e.jsx(i,{variant:"secondary",size:"sm",onClick:()=>F(s),children:"Revoke"})]})]},s.id))})]}),e.jsxs(v,{className:"border-0 shadow-lg",children:[e.jsx(j,{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(y,{className:"text-xl font-bold",children:"Team Members"}),e.jsxs(N,{className:"mt-1",children:[k.length," total members"]})]})})}),e.jsx(w,{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:k.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-5 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-md transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-200",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:s.name}),s.id===C&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full font-medium",children:"You"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(b,{className:"h-3.5 w-3.5"}),s.email]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(z,{className:"h-3.5 w-3.5"}),"Joined ",new Date(s.joined_at).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[_(s.role,s.is_owner),c&&!s.is_owner&&s.id!==C&&e.jsx("div",{className:"flex items-center gap-2",children:M?.id===s.id?e.jsxs("select",{value:s.role,onChange:a=>T(s,a.target.value),className:"text-sm rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 px-3 py-1.5",onBlur:()=>f(null),autoFocus:!0,children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>f(s),className:"p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 text-blue-600 dark:text-blue-400 transition-colors",children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>A(s),className:"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors",children:e.jsx(q,{className:"h-4 w-4"})})]})})]})]},s.id))})})]})]})]})}export{ce as default};
