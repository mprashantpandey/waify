import{r as v,j as e}from"./react-BhzSerM2.js";import{u as C,H as S,q as h,V as A,a6 as B,a7 as F,a8 as D,i as E,a9 as H}from"./vendor-YQoUUhbX.js";import{A as T}from"./AppShell-A6sQ3pxr.js";import{C as i,b as m,c as x,d as b,a as n}from"./Card-CRSrZ5HZ.js";import{B as y}from"./app-DjsbE74r.js";import{T as I}from"./TextInput-DRXLElIV.js";import{I as d}from"./InputLabel-qVeuR0hO.js";import{I as o}from"./InputError-6mWSc7R2.js";import{C as f}from"./Checkbox-CpJnf9Gf.js";import{u as M}from"./useToast-C37H2DkG.js";import"./Topbar-D6SeU-QE.js";import"./Badge-C6d-QEGL.js";import"./GlobalFlashHandler-DjMhmIiM.js";import"./BrandingWrapper-Djq-D_tN.js";import"./Alert-u60ICsin.js";import"./CookieConsentBanner-C37xsP7H.js";/* empty css            */function ee({connections:p}){const{toast:u}=M(),{data:s,setData:t,post:j,processing:g,errors:a}=C({name:"",description:"",status:"active",applies_to:{all_connections:!0,connection_ids:[]},starter_flow_mode:"guided",starter_trigger_type:"inbound_message",starter_keywords:"hi, hello",starter_reply_message:"Hi! Thanks for messaging us. A team member will get back to you shortly."}),_=v.useMemo(()=>!(s.name.trim()===""||!s.applies_to.all_connections&&(s.applies_to.connection_ids?.length??0)===0||s.starter_flow_mode==="guided"&&s.starter_trigger_type==="keyword"&&s.starter_keywords.trim()===""),[s]),c=(r,l)=>{t("starter_flow_mode",r),l&&t("starter_trigger_type",l)},k=r=>{const l=s.applies_to.connection_ids||[];t("applies_to",{...s.applies_to,connection_ids:l.includes(r)?l.filter(N=>N!==r):[...l,r]})},w=r=>{r.preventDefault(),j(route("app.chatbots.store",{}),{onSuccess:()=>u.success("Bot created successfully"),onError:()=>u.error("Please fix the highlighted fields")})};return e.jsxs(T,{children:[e.jsx(S,{title:"Create Chatbot"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(h,{href:route("app.chatbots.index",{}),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-4",children:[e.jsx(A,{className:"h-4 w-4"}),"Back to Chatbots"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Create Chatbot"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Follow these 3 steps. A working starter flow will be created automatically."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs(i,{className:"border-0 shadow-sm",children:[e.jsxs(m,{children:[e.jsx(x,{className:"text-lg",children:"Step 1: Choose How It Starts"}),e.jsx(b,{children:"Pick a starter mode. You can fully edit the flow after creation."})]}),e.jsxs(n,{className:"grid gap-3 md:grid-cols-3",children:[e.jsxs("button",{type:"button",onClick:()=>c("guided","inbound_message"),className:`rounded-xl border p-4 text-left ${s.starter_flow_mode==="guided"&&s.starter_trigger_type==="inbound_message"?"border-blue-500 bg-blue-50 dark:bg-blue-950/30":"border-gray-200 dark:border-gray-700"}`,children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2 font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx(B,{className:"h-4 w-4"}),"Reply To Every Message"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Best for first-time setup."})]}),e.jsxs("button",{type:"button",onClick:()=>c("guided","keyword"),className:`rounded-xl border p-4 text-left ${s.starter_flow_mode==="guided"&&s.starter_trigger_type==="keyword"?"border-blue-500 bg-blue-50 dark:bg-blue-950/30":"border-gray-200 dark:border-gray-700"}`,children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2 font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx(F,{className:"h-4 w-4"}),"Reply On Keywords"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Trigger only for matching words."})]}),e.jsxs("button",{type:"button",onClick:()=>c("empty"),className:`rounded-xl border p-4 text-left ${s.starter_flow_mode==="empty"?"border-blue-500 bg-blue-50 dark:bg-blue-950/30":"border-gray-200 dark:border-gray-700"}`,children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2 font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx(D,{className:"h-4 w-4"}),"Start Empty"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create bot only. Build flow manually."})]})]})]}),e.jsxs(i,{className:"border-0 shadow-sm",children:[e.jsxs(m,{children:[e.jsx(x,{className:"text-lg",children:"Step 2: Bot Details"}),e.jsx(b,{children:"Keep it simple. You can change all of this later."})]}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",value:"Bot Name"}),e.jsx(I,{id:"name",type:"text",value:s.name,onChange:r=>t("name",r.target.value),className:"mt-1",placeholder:"Support Assistant",required:!0}),e.jsx(o,{message:a.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"description",value:"Description (optional)"}),e.jsx("textarea",{id:"description",value:s.description,onChange:r=>t("description",r.target.value),className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",rows:2,placeholder:"Handles basic customer queries"}),e.jsx(o,{message:a.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"status",value:"Status"}),e.jsxs("select",{id:"status",value:s.status,onChange:r=>t("status",r.target.value),className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"paused",children:"Paused"})]}),e.jsx(o,{message:a.status,className:"mt-2"})]}),s.starter_flow_mode==="guided"&&e.jsxs(e.Fragment,{children:[s.starter_trigger_type==="keyword"&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"starter_keywords",value:"Keywords (comma/new line separated)"}),e.jsx("textarea",{id:"starter_keywords",value:s.starter_keywords,onChange:r=>t("starter_keywords",r.target.value),className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",rows:2,placeholder:"hi, hello, pricing"}),e.jsx(o,{message:a.starter_keywords,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"starter_reply_message",value:"First Auto Reply"}),e.jsx("textarea",{id:"starter_reply_message",value:s.starter_reply_message,onChange:r=>t("starter_reply_message",r.target.value),className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",rows:3}),e.jsx(o,{message:a.starter_reply_message,className:"mt-2"})]})]})]})]}),e.jsxs(i,{className:"border-0 shadow-sm",children:[e.jsx(m,{children:e.jsx(x,{className:"text-lg",children:"Step 3: Where It Applies"})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx(f,{checked:s.applies_to.all_connections,onChange:r=>t("applies_to",{...s.applies_to,all_connections:r.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"All WhatsApp connections"})]}),!s.applies_to.all_connections&&e.jsxs("div",{className:"space-y-2",children:[p.length===0?e.jsx("p",{className:"rounded-md bg-yellow-50 px-3 py-2 text-sm text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200",children:"No active connections found. Create a connection first."}):p.map(r=>e.jsxs("label",{className:"flex items-center gap-3 rounded-md border border-gray-200 p-2 dark:border-gray-700",children:[e.jsx(f,{checked:s.applies_to.connection_ids.includes(r.id),onChange:()=>k(r.id)}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:r.name})]},r.id)),e.jsx(o,{message:a["applies_to.connection_ids"],className:"mt-2"})]})]})]}),e.jsx(i,{className:"border border-emerald-200 bg-emerald-50 dark:border-emerald-900 dark:bg-emerald-950/20",children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(E,{className:"mt-0.5 h-5 w-5 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-800 dark:text-emerald-300",children:"What happens after Create"}),e.jsxs("ul",{className:"mt-1 list-disc pl-5 text-sm text-emerald-800/90 dark:text-emerald-300/90",children:[e.jsx("li",{children:"Bot is created with your selected scope."}),e.jsx("li",{children:s.starter_flow_mode==="guided"?"A starter flow is created automatically.":"No flow is created yet."}),e.jsx("li",{children:"You are taken to the bot editor to fine tune behavior."})]})]})]})})}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx(h,{href:route("app.chatbots.index",{}),children:e.jsx(y,{type:"button",variant:"secondary",children:"Cancel"})}),e.jsxs(y,{type:"submit",disabled:g||!_,children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),g?"Creating...":"Create Bot"]})]})]})]})]})}export{ee as default};
