import{r as u,j as e}from"./react-BhzSerM2.js";import{H as $,B,d as U,D as f,E as P,G as H,e as _,k as t,w as z,J,N as q}from"./vendor-YQoUUhbX.js";import{A as G}from"./AppShell-A6sQ3pxr.js";import{C as p,b as j,c as v,d as b,a as y}from"./Card-CRSrZ5HZ.js";import{B as o}from"./Badge-C6d-QEGL.js";import{B as i}from"./app-DjsbE74r.js";import{I as O}from"./Input-DoFFSnqy.js";import{L as C}from"./Label-CVvmGNuW.js";import{u as Y}from"./useNotifications-9W-smJed.js";import"./Topbar-D6SeU-QE.js";import"./GlobalFlashHandler-DjMhmIiM.js";import"./useToast-C37H2DkG.js";import"./BrandingWrapper-Djq-D_tN.js";import"./Alert-u60ICsin.js";import"./CookieConsentBanner-C37xsP7H.js";/* empty css            */function me({account:K,members:N,can_manage:l,current_user_id:k,pending_invites:d}){const{confirm:n,toast:s}=Y(),[c,w]=u.useState(""),[I,m]=u.useState(!1),[E,x]=u.useState(null),R=()=>{if(!c){s.error("Please enter an email");return}t.post(route("app.team.invite",{}),{email:c,role:"member"},{onSuccess:()=>{w(""),m(!1)},onError:a=>{const r=a.email||a.role||a.error;s.error(r||"Failed to invite member")}})},S=async(a,r)=>{if(a.role===r)return;await n({title:"Update Role",message:`Change ${a.name}'s role to ${r}?`,variant:"info"})&&t.post(route("app.team.update-role",{user:a.id}),{role:r},{onSuccess:()=>{x(null)},onError:()=>{s.error("Failed to update role")}})},T=async a=>{await n({title:"Remove Member",message:`Are you sure you want to remove ${a.name} from this account?`,variant:"danger",confirmText:"Remove"})&&t.delete(route("app.team.remove",{user:a.id}),{onSuccess:()=>{t.reload({only:["members"]})},onError:()=>{s.error("Failed to remove member")}})},A=async a=>{await n({title:"Revoke Invitation",message:`Revoke invitation for ${a.email}?`,variant:"danger",confirmText:"Revoke"})&&t.delete(route("app.team.invites.revoke",{invitation:a.id}),{onSuccess:()=>{},onError:()=>{s.error("Failed to revoke invitation")}})},M=async a=>{await n({title:"Resend Invitation",message:`Resend invitation to ${a.email}?`,variant:"info",confirmText:"Resend"})&&t.post(route("app.team.invites.resend",{invitation:a.id}),{},{onSuccess:()=>{},onError:()=>{s.error("Failed to resend invitation")}})},D=a=>{if(!a.expires_at)return null;const r=new Date(a.expires_at),h=new Date;if(r<=h)return{label:"Expired",variant:"danger",daysLeft:0,expired:!0};const L=r.getTime()-h.getTime(),g=Math.max(1,Math.ceil(L/(1e3*60*60*24)));return{label:`Expires in ${g} day${g===1?"":"s"}`,variant:"warning",daysLeft:g,expired:!1}},F=(a,r)=>r?e.jsxs(o,{variant:"warning",className:"flex items-center gap-1.5 px-3 py-1",children:[e.jsx(z,{className:"h-3.5 w-3.5"}),"Owner"]}):a==="admin"?e.jsxs(o,{variant:"info",className:"flex items-center gap-1.5 px-3 py-1",children:[e.jsx(J,{className:"h-3.5 w-3.5"}),"Legacy Admin"]}):e.jsxs(o,{variant:"default",className:"flex items-center gap-1.5 px-3 py-1",children:[e.jsx(q,{className:"h-3.5 w-3.5"}),"Chat Agent"]});return e.jsxs(G,{children:[e.jsx($,{title:"Team"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Team"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Manage your team members"})]}),l&&e.jsxs(i,{onClick:()=>m(!0),className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/50",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Invite Member"]})]}),I&&e.jsxs(p,{className:"border-0 shadow-xl",children:[e.jsxs(j,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Invite Team Member"]}),e.jsx(b,{children:"Invite a user to join your account"})]}),e.jsxs(y,{className:"space-y-5 pt-6",children:[e.jsxs("div",{children:[e.jsx(C,{htmlFor:"email",className:"text-sm font-semibold",children:"Email Address"}),e.jsx(O,{id:"email",type:"email",value:c,onChange:a=>w(a.target.value),placeholder:"user@example.com",className:"mt-2"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 flex items-center gap-1",children:[e.jsx(f,{className:"h-3 w-3"}),"New users can accept the invite and sign up from the invite link"]})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"role",className:"text-sm font-semibold",children:"Role"}),e.jsx("div",{id:"role",className:"mt-2 w-full rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200",children:"Chat Agent"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsx(i,{onClick:R,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",children:"Send Invitation"}),e.jsx(i,{variant:"secondary",onClick:()=>m(!1),className:"flex-1",children:"Cancel"})]})]})]}),l&&d&&d.length>0&&e.jsxs(p,{className:"border-0 shadow-xl",children:[e.jsxs(j,{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20",children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"}),"Pending Invitations"]}),e.jsx(b,{children:"Invitations that are waiting for acceptance"})]}),e.jsx(y,{className:"pt-6 space-y-3",children:d.map(a=>e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-amber-100 dark:border-amber-900/40 bg-white dark:bg-gray-900 px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a.email}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Role: ",a.role,a.expires_at?` â€¢ Expires ${new Date(a.expires_at).toLocaleDateString()}`:""]}),a.expires_at&&e.jsx("div",{className:"mt-1",children:(()=>{const r=D(a);return r?e.jsx(o,{variant:r.variant,className:"text-xs",children:r.label}):null})()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{variant:"secondary",size:"sm",onClick:()=>M(a),children:"Resend"}),e.jsx(i,{variant:"secondary",size:"sm",onClick:()=>A(a),children:"Revoke"})]})]},a.id))})]}),e.jsxs(p,{className:"border-0 shadow-lg",children:[e.jsx(j,{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(v,{className:"text-xl font-bold",children:"Team Members"}),e.jsxs(b,{className:"mt-1",children:[N.length," total members"]})]})})}),e.jsx(y,{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:N.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-5 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-md transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-200",children:a.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:a.name}),a.id===k&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full font-medium",children:"You"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(f,{className:"h-3.5 w-3.5"}),a.email]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(P,{className:"h-3.5 w-3.5"}),"Joined ",new Date(a.joined_at).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[F(a.role,a.is_owner),l&&!a.is_owner&&a.id!==k&&e.jsx("div",{className:"flex items-center gap-2",children:E?.id===a.id?e.jsxs("select",{value:a.role,onChange:r=>S(a,r.target.value),className:"text-sm rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 px-3 py-1.5",onBlur:()=>x(null),autoFocus:!0,children:[a.role!=="member"&&e.jsx("option",{value:a.role,children:a.role==="admin"?"Legacy Admin":a.role}),e.jsx("option",{value:"member",children:"Chat Agent"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(a),className:"p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 text-blue-600 dark:text-blue-400 transition-colors",children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(a),className:"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors",children:e.jsx(_,{className:"h-4 w-4"})})]})})]})]},a.id))})})]})]})]})}export{me as default};
