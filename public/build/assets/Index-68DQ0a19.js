import{r as d,j as e}from"./react-BhzSerM2.js";import{H as $,l as x,F as m,av as k,an as B,am as z,X as H,$ as L,ay as R,az as P,aj as U,Z as G,k as K,ba as V,B as W,e as r}from"./vendor-DxGhd0kb.js";import{A as Y}from"./AppShell-CAKOp2C5.js";import{C as h,b as Z,c as O,a as g}from"./Card-BQiuQfXG.js";import{B as p}from"./Badge-BxV76wwp.js";import{u as X,B as t}from"./app-DAXd03gX.js";import{E as q}from"./EmptyState-C-qCOnBR.js";import{T as J}from"./TextInput-DRXLElIV.js";import{u as Q}from"./useToast-m6H8bvjE.js";import"./Topbar-DGBYSxei.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./BrandingWrapper-DK418oSm.js";import"./Alert-DwA9ZChZ.js";import"./CookieConsentBanner-pD2YLMzO.js";/* empty css            */function ue({account:ee,templates:u,connections:y,filters:C}){const{toast:l}=Q(),b=X(),[s,o]=d.useState(C),[c,T]=d.useState(!1),[S,j]=d.useState(null),[A,f]=d.useState(null),[F,v]=d.useState(null),N=()=>{r.get(route("app.whatsapp.templates.index",{}),s,{preserveState:!0,preserveScroll:!0})},E=()=>{const a={connection:"",status:"",category:"",language:"",search:""};o(a),r.get(route("app.whatsapp.templates.index",{}),a)},M=(a,i)=>{const n=`${a}:${i}`;navigator.clipboard.writeText(n),j(n),l.success("Template name copied"),setTimeout(()=>j(null),2e3)},w=()=>{r.post(route("app.whatsapp.templates.sync",{}),{connection_id:s.connection||y[0]?.id},{onSuccess:()=>{l.success("Templates synced successfully"),r.reload({only:["templates"]})},onError:()=>{l.error("Failed to sync templates")}})},_=async a=>{await b({title:"Archive Template",message:`Are you sure you want to archive "${a.name}"? You can restore it later.`,variant:"warning"})&&(f(a.slug),r.post(route("app.whatsapp.templates.archive",{template:a.slug}),{},{onSuccess:()=>{l.success("Template archived successfully"),r.reload({only:["templates"]})},onError:()=>{l.error("Failed to archive template")},onFinish:()=>f(null)}))},D=async a=>{await b({title:"Delete Template",message:`Are you sure you want to permanently delete "${a.name}"? This action cannot be undone.`,variant:"danger",confirmText:"Delete"})&&(v(a.slug),r.delete(route("app.whatsapp.templates.destroy",{template:a.slug}),{onSuccess:()=>{l.success("Template deleted successfully"),r.reload({only:["templates"]})},onError:()=>{l.error("Failed to delete template")},onFinish:()=>v(null)}))},I=a=>{const n={approved:{variant:"success",label:"Approved"},pending:{variant:"warning",label:"Pending"},rejected:{variant:"danger",label:"Rejected"},paused:{variant:"default",label:"Paused"},disabled:{variant:"default",label:"Disabled"}}[a.toLowerCase()]||{variant:"default",label:a};return e.jsx(p,{variant:n.variant,className:"px-3 py-1",children:n.label})};return e.jsxs(Y,{children:[e.jsx($,{title:"Message Templates"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Message Templates"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Manage your WhatsApp message templates"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{href:route("app.whatsapp.templates.create",{}),children:e.jsxs(t,{className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/50",children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),"Create Template"]})}),e.jsxs(t,{onClick:w,variant:"secondary",className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 shadow-lg shadow-green-500/50",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Sync from Meta"]})]})]}),e.jsxs(h,{className:"border-0 shadow-lg",children:[e.jsx(Z,{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:"flex items-center gap-2 text-lg font-bold",children:[e.jsx(B,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Filters"]}),e.jsxs("button",{onClick:()=>T(!c),className:"text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:[c?"Hide":"Show"," Filters"]})]})}),c&&e.jsxs(g,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(J,{type:"text",value:s.search,onChange:a=>o({...s,search:a.target.value}),onKeyDown:a=>a.key==="Enter"&&N(),className:"pl-10 rounded-xl",placeholder:"Search templates..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Connection"}),e.jsxs("select",{value:s.connection,onChange:a=>o({...s,connection:a.target.value}),className:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 px-4 py-2.5",children:[e.jsx("option",{value:"",children:"All Connections"}),y.map(a=>e.jsx("option",{value:a.id.toString(),children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:s.status,onChange:a=>o({...s,status:a.target.value}),className:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 px-4 py-2.5",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs("select",{value:s.category,onChange:a=>o({...s,category:a.target.value}),className:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 px-4 py-2.5",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"MARKETING",children:"Marketing"}),e.jsx("option",{value:"UTILITY",children:"Utility"}),e.jsx("option",{value:"AUTHENTICATION",children:"Authentication"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsx(t,{onClick:N,className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/50 rounded-xl",children:"Apply Filters"}),e.jsxs(t,{onClick:E,variant:"secondary",className:"rounded-xl",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})]}),u.data.length===0?e.jsx(h,{className:"border-0 shadow-xl",children:e.jsx(g,{className:"py-16",children:e.jsx(q,{icon:m,title:"No templates found",description:"Sync templates from Meta to import your WhatsApp message templates.",action:e.jsxs(t,{onClick:w,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 shadow-lg shadow-green-500/50",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Sync Templates"]})})})}):e.jsx(h,{className:"border-0 shadow-lg",children:e.jsx(g,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Template"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Language"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Variables"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Connection"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:u.data.map(a=>e.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-blue-100 dark:hover:from-blue-900/10 dark:hover:to-blue-800/10 transition-all duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:e.jsx(m,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:a.name}),a.body_text&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs mt-0.5",children:[a.body_text.substring(0,60),a.body_text.length>60?"...":""]})]}),e.jsx("button",{onClick:()=>M(a.name,a.language),className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:S===`${a.name}:${a.language}`?e.jsx(L,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):e.jsx(R,{className:"h-4 w-4 text-gray-400"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(P,{className:"h-3.5 w-3.5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:a.language})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs(p,{variant:"default",className:"px-3 py-1",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),a.category]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I(a.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.variable_count>0?e.jsxs(p,{variant:"info",className:"px-3 py-1",children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),a.variable_count]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"â€”"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:a.connection.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(x,{href:route("app.whatsapp.templates.show",{template:a.slug}),children:e.jsx(t,{variant:"ghost",size:"sm",className:"rounded-lg",children:"View"})}),e.jsx(x,{href:route("app.whatsapp.templates.send",{template:a.slug}),children:e.jsxs(t,{size:"sm",className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-lg",children:[e.jsx(K,{className:"h-4 w-4 mr-1"}),"Send"]})}),e.jsx(t,{variant:"ghost",size:"sm",className:"rounded-lg text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:hover:bg-orange-900/20",onClick:()=>_(a),disabled:A===a.slug,children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx(t,{variant:"ghost",size:"sm",className:"rounded-lg text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:()=>D(a),disabled:F===a.slug,children:e.jsx(W,{className:"h-4 w-4"})})]})})]},a.id))})]})})})})]})]})}export{ue as default};
