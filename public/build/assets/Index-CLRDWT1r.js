import{r as n,j as e}from"./react-BhzSerM2.js";import{H as L,v as U,g as P,w as p,x as H,y as z,B as Y,e as t,o as q,D as J,E as O}from"./vendor-DxGhd0kb.js";import{A as G}from"./AppShell-BB77liAb.js";import{C as b,b as v,c as j,d as y,a as N}from"./Card-DyITSrT5.js";import{B as o}from"./Badge-Dmpsa1zd.js";import{B as l}from"./app-CUdtZvAA.js";import{I as K}from"./Input-D02iHWHz.js";import{L as R}from"./Label-BqxKKNxn.js";import{u as Q}from"./useNotifications-BjxUwxRh.js";import"./Topbar-DS5R2nuh.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./useToast-m6H8bvjE.js";import"./BrandingWrapper-DK418oSm.js";import"./Alert-0kUZKT4N.js";import"./CookieConsentBanner-DBs8YRGi.js";/* empty css            */function ue({account:V,members:w,can_manage:d,current_user_id:k,pending_invites:c}){const{confirm:i,toast:r}=Q(),[m,C]=n.useState(""),[x,I]=n.useState("member"),[S,u]=n.useState(!1),[E,h]=n.useState(null),M=()=>{if(!m||!x){r.error("Please fill in all fields");return}t.post(route("app.team.invite",{}),{email:m,role:x},{onSuccess:()=>{r.success("Member invited successfully"),C(""),I("member"),u(!1)},onError:a=>{a.email?r.error(a.email):r.error("Failed to invite member")}})},D=async(a,s)=>{if(a.role===s)return;await i({title:"Update Role",message:`Change ${a.name}'s role to ${s}?`,variant:"info"})&&t.post(route("app.team.update-role",{user:a.id}),{role:s},{onSuccess:()=>{r.success("Role updated successfully"),h(null)},onError:()=>{r.error("Failed to update role")}})},T=async a=>{await i({title:"Remove Member",message:`Are you sure you want to remove ${a.name} from this account?`,variant:"danger",confirmText:"Remove"})&&t.delete(route("app.team.remove",{user:a.id}),{onSuccess:()=>{r.success("Member removed successfully"),t.reload({only:["members"]})},onError:()=>{r.error("Failed to remove member")}})},A=async a=>{await i({title:"Revoke Invitation",message:`Revoke invitation for ${a.email}?`,variant:"danger",confirmText:"Revoke"})&&t.delete(route("app.team.invites.revoke",{invitation:a.id}),{onSuccess:()=>{r.success("Invitation revoked successfully")},onError:()=>{r.error("Failed to revoke invitation")}})},F=async a=>{if(a.expires_at&&new Date(a.expires_at)>new Date){r.error("You can resend after the invite expires.");return}await i({title:"Resend Invitation",message:`Resend invitation to ${a.email}?`,variant:"info",confirmText:"Resend"})&&t.post(route("app.team.invites.resend",{invitation:a.id}),{},{onSuccess:()=>{r.success("Invitation resent successfully")},onError:()=>{r.error("Failed to resend invitation")}})},$=a=>{if(!a.expires_at)return null;const s=new Date(a.expires_at),f=new Date;if(s<=f)return{label:"Expired",variant:"danger",daysLeft:0,expired:!0};const _=s.getTime()-f.getTime(),g=Math.max(1,Math.ceil(_/(1e3*60*60*24)));return{label:`Expires in ${g} day${g===1?"":"s"}`,variant:"warning",daysLeft:g,expired:!1}},B=(a,s)=>s?e.jsxs(o,{variant:"warning",className:"flex items-center gap-1.5 px-3 py-1",children:[e.jsx(q,{className:"h-3.5 w-3.5"}),"Owner"]}):a==="admin"?e.jsxs(o,{variant:"info",className:"flex items-center gap-1.5 px-3 py-1",children:[e.jsx(J,{className:"h-3.5 w-3.5"}),"Admin"]}):e.jsxs(o,{variant:"default",className:"flex items-center gap-1.5 px-3 py-1",children:[e.jsx(O,{className:"h-3.5 w-3.5"}),"Member"]});return e.jsxs(G,{children:[e.jsx(L,{title:"Team"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Team"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Manage your team members"})]}),d&&e.jsxs(l,{onClick:()=>u(!0),className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/50",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Invite Member"]})]}),S&&e.jsxs(b,{className:"border-0 shadow-xl",children:[e.jsxs(v,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Invite Team Member"]}),e.jsx(y,{children:"Invite a user to join your account"})]}),e.jsxs(N,{className:"space-y-5 pt-6",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"email",className:"text-sm font-semibold",children:"Email Address"}),e.jsx(K,{id:"email",type:"email",value:m,onChange:a=>C(a.target.value),placeholder:"user@example.com",className:"mt-2"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 flex items-center gap-1",children:[e.jsx(p,{className:"h-3 w-3"}),"User must already have an account"]})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"role",className:"text-sm font-semibold",children:"Role"}),e.jsxs("select",{id:"role",value:x,onChange:a=>I(a.target.value),className:"mt-2 w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 px-4 py-2.5",children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsx(l,{onClick:M,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",children:"Send Invitation"}),e.jsx(l,{variant:"secondary",onClick:()=>u(!1),className:"flex-1",children:"Cancel"})]})]})]}),d&&c&&c.length>0&&e.jsxs(b,{className:"border-0 shadow-xl",children:[e.jsxs(v,{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20",children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"}),"Pending Invitations"]}),e.jsx(y,{children:"Invitations that are waiting for acceptance"})]}),e.jsx(N,{className:"pt-6 space-y-3",children:c.map(a=>e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-amber-100 dark:border-amber-900/40 bg-white dark:bg-gray-900 px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a.email}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Role: ",a.role,a.expires_at?` â€¢ Expires ${new Date(a.expires_at).toLocaleDateString()}`:""]}),a.expires_at&&e.jsx("div",{className:"mt-1",children:(()=>{const s=$(a);return s?e.jsx(o,{variant:s.variant,className:"text-xs",children:s.label}):null})()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"secondary",size:"sm",onClick:()=>F(a),disabled:a.expires_at?new Date(a.expires_at)>new Date:!1,children:"Resend"}),e.jsx(l,{variant:"secondary",size:"sm",onClick:()=>A(a),children:"Revoke"})]})]},a.id))})]}),e.jsxs(b,{className:"border-0 shadow-lg",children:[e.jsx(v,{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(j,{className:"text-xl font-bold",children:"Team Members"}),e.jsxs(y,{className:"mt-1",children:[w.length," total members"]})]})})}),e.jsx(N,{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:w.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-5 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-md transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-200",children:a.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:a.name}),a.id===k&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full font-medium",children:"You"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(p,{className:"h-3.5 w-3.5"}),a.email]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(H,{className:"h-3.5 w-3.5"}),"Joined ",new Date(a.joined_at).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[B(a.role,a.is_owner),d&&!a.is_owner&&a.id!==k&&e.jsx("div",{className:"flex items-center gap-2",children:E?.id===a.id?e.jsxs("select",{value:a.role,onChange:s=>D(a,s.target.value),className:"text-sm rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 px-3 py-1.5",onBlur:()=>h(null),autoFocus:!0,children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(a),className:"p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 text-blue-600 dark:text-blue-400 transition-colors",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(a),className:"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors",children:e.jsx(Y,{className:"h-4 w-4"})})]})})]})]},a.id))})})]})]})]})}export{ue as default};
