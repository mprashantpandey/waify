import{r as S,j as e}from"./react-BhzSerM2.js";import{H as D,q as T,V as _,a3 as h,a4 as A,X as E,U as F,p as P,i as R,a5 as B,k as d}from"./vendor-YQoUUhbX.js";import{A as H}from"./AppShell-A6sQ3pxr.js";import{C as n,a as c,b as u,c as g}from"./Card-CRSrZ5HZ.js";import{B as L}from"./Badge-C6d-QEGL.js";import{B as l}from"./app-DjsbE74r.js";import{u as M}from"./useToast-C37H2DkG.js";import"./Topbar-D6SeU-QE.js";import"./GlobalFlashHandler-DjMhmIiM.js";import"./BrandingWrapper-Djq-D_tN.js";import"./Alert-u60ICsin.js";import"./CookieConsentBanner-C37xsP7H.js";/* empty css            */function ee({account:q,campaign:s,stats:r,recipients:y,testTargetPhone:j}){const{toast:a}=M(),[x,f]=S.useState(j||""),o=t=>{const p={draft:{variant:"default",label:"Draft"},scheduled:{variant:"info",label:"Scheduled"},sending:{variant:"info",label:"Sending"},paused:{variant:"warning",label:"Paused"},completed:{variant:"success",label:"Completed"},cancelled:{variant:"danger",label:"Cancelled"},pending:{variant:"default",label:"Pending"},sent:{variant:"info",label:"Sent"},delivered:{variant:"success",label:"Delivered"},read:{variant:"success",label:"Read"},failed:{variant:"danger",label:"Failed"}}[t]||{variant:"default",label:t};return e.jsx(L,{variant:p.variant,children:p.label})},i=t=>t?new Date(t).toLocaleString():"—",m=()=>{d.post(route("app.broadcasts.start",{campaign:s.slug}),{},{onSuccess:()=>{a.success("Campaign started")},onError:()=>{a.error("Failed to start campaign")}})},N=()=>{d.post(route("app.broadcasts.pause",{campaign:s.slug}),{},{onSuccess:()=>{a.success("Campaign paused")},onError:()=>{a.error("Failed to pause campaign")}})},b=()=>{confirm("Are you sure you want to cancel this campaign?")&&d.post(route("app.broadcasts.cancel",{campaign:s.slug}),{},{onSuccess:()=>{a.success("Campaign cancelled")},onError:()=>{a.error("Failed to cancel campaign")}})},v=()=>{d.post(route("app.broadcasts.duplicate",{campaign:s.slug}),{},{onSuccess:()=>a.success("Campaign duplicated"),onError:()=>a.error("Failed to duplicate campaign")})},k=()=>{d.post(route("app.broadcasts.retry-failed",{campaign:s.slug}),{},{onSuccess:()=>a.success("Retry queued for failed recipients"),onError:()=>a.error("Failed to retry failed recipients")})},w=()=>{confirm("Delete this campaign permanently?")&&d.delete(route("app.broadcasts.destroy",{campaign:s.slug}),{onSuccess:()=>a.success("Campaign deleted"),onError:()=>a.error("Failed to delete campaign")})},C=()=>{d.post(route("app.broadcasts.send-test",{campaign:s.slug}),{phone:x},{onSuccess:()=>a.success("Test message sent"),onError:()=>a.error("Failed to send test message")})};return e.jsxs(H,{children:[e.jsx(D,{title:s.name}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(T,{href:route("app.broadcasts.index",{}),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-4",children:[e.jsx(_,{className:"h-4 w-4"}),"Back to Campaigns"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:s.name}),s.description&&e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o(s.status),s.status==="draft"&&e.jsxs(l,{onClick:m,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Start"]}),s.status==="sending"&&e.jsxs(l,{onClick:N,variant:"secondary",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Pause"]}),s.status==="paused"&&e.jsxs(l,{onClick:m,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Resume"]}),["draft","scheduled","sending","paused"].includes(s.status)&&e.jsxs(l,{onClick:b,variant:"secondary",className:"text-red-600 hover:text-red-700",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Cancel"]}),r.failed>0&&e.jsx(l,{onClick:k,variant:"secondary",children:"Retry Failed"}),e.jsx(l,{onClick:v,variant:"secondary",children:"Duplicate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{value:x,onChange:t=>f(t.target.value),placeholder:"Test phone",className:"rounded-md border border-gray-300 px-2 py-1 text-sm dark:border-gray-700 dark:bg-gray-800"}),e.jsx(l,{onClick:C,variant:"secondary",children:"Send Test To Me"})]}),["draft","cancelled","completed"].includes(s.status)&&e.jsx(l,{onClick:w,variant:"secondary",className:"text-red-600 hover:text-red-700",children:"Delete"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(n,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Recipients"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:r.total})]}),e.jsx(F,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(n,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sent"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:r.sent})]}),e.jsx(P,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(n,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Delivered"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:r.delivered})]}),e.jsx(R,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(n,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Read"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:r.read})]}),e.jsx(B,{className:"h-8 w-8 text-purple-600"})]})})})]}),s.status==="sending"&&r.total>0&&e.jsx(n,{children:e.jsxs(c,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Progress"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.completion_percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${r.completion_percentage}%`}})})]})}),e.jsxs(n,{children:[e.jsx(u,{children:e.jsx(g,{children:"Campaign Details"})}),e.jsxs(c,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type"}),e.jsx("span",{className:"text-sm font-medium",children:s.type})]}),s.connection&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Connection"}),e.jsx("span",{className:"text-sm font-medium",children:s.connection.name})]}),s.template&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Template"}),e.jsx("span",{className:"text-sm font-medium",children:s.template.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Scheduled At"}),e.jsx("span",{className:"text-sm font-medium",children:i(s.scheduled_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Started At"}),e.jsx("span",{className:"text-sm font-medium",children:i(s.started_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed At"}),e.jsx("span",{className:"text-sm font-medium",children:i(s.completed_at)})]})]})]}),e.jsxs(n,{children:[e.jsx(u,{children:e.jsx(g,{children:"Recipients"})}),e.jsx(c,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Phone Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Sent At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Delivered At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Read At"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:y.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:t.phone_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.name||"—"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o(t.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:i(t.sent_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:i(t.delivered_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:i(t.read_at)})]},t.id))})]})})})]})]})]})}export{ee as default};
