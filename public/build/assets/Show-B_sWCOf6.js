import{r as C,j as e}from"./react-BhzSerM2.js";import{G as w,H as z,l as j,N as U,ao as $,M as S,e as G,f as A,E as R}from"./vendor-DxGhd0kb.js";import{A as J}from"./AppShell-Cc2RD8Vl.js";import{C as d,b as F,c as D,a as i}from"./Card-W2rT1n1C.js";import{B as v}from"./Badge-i1wYvjg_.js";import{B as c}from"./app-Iwsu59co.js";import{u as K}from"./useToast-m6H8bvjE.js";import{T as m}from"./TextInput-DRXLElIV.js";import{I as l}from"./InputLabel-qVeuR0hO.js";import"./Topbar-DdwsMJGZ.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./BrandingWrapper-DK418oSm.js";import"./Alert-CNardO3g.js";import"./CookieConsentBanner-CkGeiZeY.js";/* empty css            */function ie({account:Q,contact:u,activities:_=[],tags:y=[],segments:b=[]}){const a={...u,tags:u?.tags??[],segments:u?.segments??[]},f=Array.isArray(y)?y:[],{toast:x}=K(),[B,g]=C.useState(!1),[N,k]=C.useState(!1),{data:T,setData:h,post:E,processing:I}=w({note:""}),{data:t,setData:r,put:L,processing:M}=w({name:a.name||"",email:a.email||"",phone:a.phone||"",company:a.company||"",notes:a.notes||"",status:a.status,tags:(a.tags||[]).map(s=>s.id),segments:(a.segments||[]).map(s=>s.id)}),H=s=>{s.preventDefault(),L(route("app.contacts.update",{contact:a.slug||a.id}),{onSuccess:()=>{x.success("Contact updated")},onError:()=>{x.error("Failed to update contact")}})},O=s=>{s.preventDefault(),E(route("app.contacts.add-note",{contact:a.slug||a.id}),{onSuccess:()=>{x.success("Note added"),g(!1),h("note","")},onError:()=>{x.error("Failed to add note")}})},q=s=>{const o={active:{variant:"success",label:"Active"},inactive:{variant:"default",label:"Inactive"},blocked:{variant:"danger",label:"Blocked"},opt_out:{variant:"warning",label:"Opt Out"}}[s]||{variant:"default",label:s};return e.jsx(v,{variant:o.variant,children:o.label})},p=s=>s?new Date(s).toLocaleString():"â€”";return e.jsxs(J,{children:[e.jsx(z,{title:a.name||a.wa_id}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(j,{href:route("app.contacts.index",{}),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-4",children:[e.jsx(U,{className:"h-4 w-4"}),"Back to Contacts"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:a.name||a.wa_id}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[q(a.status),(a.tags||[]).map(s=>e.jsx(v,{variant:"default",style:{backgroundColor:s.color+"20",color:s.color},children:s.name},s.id)),(a.segments||[]).length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Segments:"}),(a.segments||[]).map(s=>e.jsx(v,{variant:"secondary",children:s.name},s.id))]})]})]}),e.jsxs(c,{className:"bg-[#25D366] hover:bg-[#1DAA57] text-white",disabled:N,onClick:()=>{k(!0),G.visit(route("app.whatsapp.conversations.by-contact",{contact:a.slug||a.id}),{onFinish:()=>k(!1)})},"aria-label":"Start conversation in Inbox",children:[N?e.jsx($,{className:"h-4 w-4 mr-2 animate-spin","aria-hidden":!0}):e.jsx(S,{className:"h-4 w-4 mr-2","aria-hidden":!0}),"Start conversation"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsx(F,{children:e.jsx(D,{children:"Contact Details"})}),e.jsx(i,{children:e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",value:"Name"}),e.jsx(m,{id:"name",type:"text",value:t.name,onChange:s=>r("name",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",value:"Email"}),e.jsx(m,{id:"email",type:"email",value:t.email,onChange:s=>r("email",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",value:"Phone"}),e.jsx(m,{id:"phone",type:"text",value:t.phone,onChange:s=>r("phone",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"company",value:"Company"}),e.jsx(m,{id:"company",type:"text",value:t.company,onChange:s=>r("company",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"status",value:"Status"}),e.jsxs("select",{id:"status",value:t.status,onChange:s=>r("status",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"blocked",children:"Blocked"}),e.jsx("option",{value:"opt_out",children:"Opt Out"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"notes",value:"Notes"}),e.jsx("textarea",{id:"notes",value:t.notes,onChange:s=>r("notes",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",rows:4})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Tags"}),f.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 mb-2",children:"Add or remove tags for this contact"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(s=>e.jsx("button",{type:"button",onClick:()=>{const n=t.tags;r("tags",n.includes(s.id)?n.filter(o=>o!==s.id):[...n,s.id])},className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors border ${t.tags.includes(s.id)?"border-blue-500 bg-blue-600 text-white":"border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,style:t.tags.includes(s.id)?void 0:{borderColor:s.color+"80",backgroundColor:s.color+"20",color:s.color},children:s.name},s.id))})]}):e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["No tags yet."," ",e.jsx(j,{href:route("app.contacts.tags.index"),className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400",children:"Create tags in the Tags section"})]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Segments"}),b.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 mb-2",children:"Add or remove segments for this contact"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(s=>e.jsx("button",{type:"button",onClick:()=>{const n=t.segments;r("segments",n.includes(s.id)?n.filter(o=>o!==s.id):[...n,s.id])},className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors border ${t.segments.includes(s.id)?"border-emerald-500 bg-emerald-600 text-white":"border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:s.name},s.id))})]}):e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["No segments yet."," ",e.jsx(j,{href:route("app.contacts.segments.index"),className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400",children:"Create segments in the Segments section"})]})]}),e.jsx(c,{type:"submit",disabled:M,children:"Save Changes"})]})})]}),e.jsxs(d,{children:[e.jsx(F,{children:e.jsx(D,{children:"Activity History"})}),e.jsxs(i,{children:[B?e.jsxs("form",{onSubmit:O,className:"mb-4 space-y-2",children:[e.jsx(m,{value:T.note,onChange:s=>h("note",s.target.value),placeholder:"Add a note...",required:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{type:"submit",disabled:I,size:"sm",children:"Save"}),e.jsx(c,{type:"button",variant:"secondary",size:"sm",onClick:()=>{g(!1),h("note","")},children:"Cancel"})]})]}):e.jsx(c,{onClick:()=>g(!0),variant:"secondary",className:"mb-4 w-full",children:"Add Note"}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:_.map(s=>e.jsx("div",{className:"border-l-2 border-gray-200 dark:border-gray-700 pl-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:s.description}),s.user&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["by ",s.user.name]})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:p(s.created_at)})]})},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(d,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Messages"}),e.jsx("p",{className:"text-lg font-bold",children:a.message_count})]})]})})}),e.jsx(d,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Seen"}),e.jsx("p",{className:"text-sm font-medium",children:p(a.last_seen_at)})]})]})})}),e.jsx(d,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Source"}),e.jsx("p",{className:"text-sm font-medium",children:a.source||"Manual"})]})]})})}),e.jsx(d,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"text-sm font-medium",children:p(a.created_at)})]})]})})})]})]})]})}export{ie as default};
