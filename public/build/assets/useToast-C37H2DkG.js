import{r as d}from"./react-BhzSerM2.js";let m=0;const g=new Set;let n=[];const i=new Map,$=6e3,b=1e4,C=new Set(["success","error","warning","info","status"]),c=new Map;function _(u){const o=T=>T.trim().toLowerCase().replace(/\b(successfully|successful|success)\b/g,"").replace(/\bfailed to\b/g,"").replace(/\bunable to\b/g,"").replace(/[.!?]+$/g,"").replace(/\s+/g," ").trim(),s=o(u.title||""),r=o(u.description||"");return!s&&!r?"":r&&C.has(s.toLowerCase())?r.toLowerCase():s&&r?`${s} | ${r}`.toLowerCase():r||s}function M(){const[u,o]=d.useState(n),s=d.useCallback(t=>{const e=Date.now(),w=_(t)||`${t.variant||"info"}|${t.title||""}|${t.description||""}`,E=`${t.variant||"info"}|${w}`,v=c.get(E);if(v&&e-v<b)return`guarded-${E}`;if(c.set(E,e),c.size>400)for(const[a,S]of c.entries())e-S>b*2&&c.delete(a);const p=i.get(w);if(p&&e-p.at<$)return p.id;if(i.size>200)for(const[a,S]of i.entries())e-S.at>$*2&&i.delete(a);const l=`toast-${++m}`,f={id:l,duration:5e3,...t};return n=[...n,f],i.set(w,{id:l,at:e}),g.forEach(a=>a(n)),o(n),f.duration&&f.duration>0&&setTimeout(()=>{r(l)},f.duration),l},[]),r=d.useCallback(t=>{n=n.filter(e=>e.id!==t),g.forEach(e=>e(n)),o(n)},[]),T={success:(t,e)=>{s({title:t,description:e,variant:"success"})},error:(t,e)=>{s({title:t,description:e,variant:"error"})},warning:(t,e)=>{s({title:t,description:e,variant:"warning"})},info:(t,e)=>{s({title:t,description:e,variant:"info"})}};return d.useEffect(()=>{const t=e=>{o(e)};return g.add(t),o(n),()=>{g.delete(t)}},[]),{toasts:u,addToast:s,removeToast:r,toast:T}}export{M as u};
