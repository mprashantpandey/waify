import{j as e}from"./react-BhzSerM2.js";import{o as B,H as F,C as b,q as d,_ as L,l as R,k as j,j as Y,M as H,F as I,Z as O,U as V,s as N}from"./vendor-YQoUUhbX.js";import{A as q}from"./AppShell-A6sQ3pxr.js";import{C as w,b as v,c as k,d as _,a as C}from"./Card-CRSrZ5HZ.js";import{B as z}from"./Badge-C6d-QEGL.js";import{B as o}from"./app-DjsbE74r.js";import{P as Z}from"./Progress-CFRe6Wbj.js";import{u as W}from"./useNotifications-9W-smJed.js";import{A as D}from"./Alert-u60ICsin.js";import"./Topbar-D6SeU-QE.js";import"./GlobalFlashHandler-DjMhmIiM.js";import"./useToast-C37H2DkG.js";import"./BrandingWrapper-Djq-D_tN.js";import"./CookieConsentBanner-C37xsP7H.js";/* empty css            */function oe({account:S,subscription:a,plan:s,usage:h,current_connections_count:u,current_agents_count:p}){const{auth:P}=B().props,{confirm:T}=W(),y=Number(S.owner_id)===Number(P?.user?.id),M=r=>{const l={trialing:{variant:"default",label:"Trial"},active:{variant:"success",label:"Active"},past_due:{variant:"warning",label:"Past Due"},canceled:{variant:"danger",label:"Canceled"}}[r]||{variant:"default",label:r};return e.jsx(z,{variant:l.variant,className:"px-3 py-1",children:l.label})},f=(r,t)=>{if(r===null)return"Custom";if(r===0)return"Free";const l=r/100;return new Intl.NumberFormat("en-IN",{style:"currency",currency:t,minimumFractionDigits:0}).format(l)},A=(r,t)=>!t||t===-1||t===9999||t===9999999?0:Math.min(r/t*100,100),x=a?(r=>{if(!r)return null;const t=new Date,n=new Date(r).getTime()-t.getTime(),i=Math.ceil(n/(1e3*60*60*24));return i>0?i:0})(a.trial_ends_at):null,c=(r,t,l,n,i)=>{if(n===void 0)return null;const g=n===-1||n===9999||n===9999999,m=g?0:A(l,n),U=m>=90?"danger":m>=75?"warning":"default";return e.jsxs("div",{className:"p-5 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:t}),e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:r})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:[l.toLocaleString()," / ",g?"âˆž":n.toLocaleString(),i!==void 0&&e.jsxs("span",{className:"ml-1 text-xs text-gray-500 font-normal",children:["(",i," active)"]})]})]}),!g&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{value:m,variant:U,className:"h-2.5"}),m>=90&&e.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:["Near limit. ",e.jsx(d,{href:route("app.billing.plans",{}),className:"underline hover:no-underline",children:"Upgrade"})]})]})]})};return e.jsxs(q,{children:[e.jsx(F,{title:"Billing Overview"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Billing Overview"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Manage your subscription and view usage"})]}),a?.status==="past_due"&&e.jsxs(D,{variant:"warning",className:"border-yellow-200 dark:border-yellow-800",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-1",children:"Payment Past Due"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mb-3",children:"Your subscription payment is past due. Please update your payment method to continue using all features."}),a.last_error&&e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 italic mb-3",children:a.last_error}),e.jsx(d,{href:route("app.billing.plans",{}),children:e.jsx(o,{variant:"secondary",size:"sm",className:"rounded-xl",children:"Update Payment"})})]})]}),a?.status==="canceled"&&e.jsxs(D,{variant:"error",className:"border-red-200 dark:border-red-800",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-200 mb-1",children:"Subscription Canceled"}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mb-3",children:["Your subscription was canceled on ",a.canceled_at?new Date(a.canceled_at).toLocaleDateString():"a previous date",". You can reactivate it or choose a new plan."]}),e.jsx(d,{href:route("app.billing.plans",{}),children:e.jsx(o,{variant:"secondary",size:"sm",className:"rounded-xl",children:"View Plans"})})]})]}),e.jsxs(w,{className:"border-0 shadow-lg",children:[e.jsx(v,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-xl",children:e.jsx(L,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx(k,{className:"text-xl font-bold",children:"Current Plan"}),e.jsx(_,{children:"Your active subscription details"})]})]}),a&&M(a.status)]})}),e.jsx(C,{className:"p-6",children:s?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:s.name})}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monthly"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:f(s.price_monthly,s.currency)})]}),s.price_yearly&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Yearly"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:f(s.price_yearly,s.currency)})]})]}),a?.status==="trialing"&&x!==null&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-blue-800 dark:text-blue-200",children:[x," ",x===1?"day":"days"," left in trial"]}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["Trial ends on ",a.trial_ends_at?new Date(a.trial_ends_at).toLocaleDateString():"soon"]})]})]})}),a?.cancel_at_period_end&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl border border-yellow-200 dark:border-yellow-800",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-medium",children:["Subscription will be canceled on"," ",a.current_period_end?new Date(a.current_period_end).toLocaleDateString():"period end"]})}),e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(d,{href:route("app.billing.plans",{}),children:e.jsx(o,{className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/50 rounded-xl",children:"Change Plan"})}),y&&a&&a.status==="active"&&!a.cancel_at_period_end&&e.jsx(o,{variant:"secondary",onClick:async()=>{await T({title:"Cancel Subscription",message:"Are you sure you want to cancel your subscription?",variant:"warning"})&&j.post(route("app.billing.cancel",{}))},className:"rounded-xl",children:"Cancel Subscription"}),y&&a&&a.cancel_at_period_end&&e.jsx(o,{variant:"success",onClick:()=>{j.post(route("app.billing.resume",{}))},className:"rounded-xl",children:"Resume Subscription"})]})]}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No plan assigned"})})]}),e.jsxs(w,{className:"border-0 shadow-lg",children:[e.jsx(v,{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl",children:e.jsx(Y,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx(k,{className:"text-xl font-bold",children:"Current Usage (This Month)"}),e.jsx(_,{children:"Track your usage against plan limits"})]})]})})}),e.jsxs(C,{className:"p-6 space-y-4",children:[c("Messages Sent",e.jsx(H,{className:"h-4 w-4 text-white"}),h.messages_sent,s?.limits.messages_monthly),c("Template Sends",e.jsx(I,{className:"h-4 w-4 text-white"}),h.template_sends,s?.limits.template_sends_monthly),c("WhatsApp Connections",e.jsx(O,{className:"h-4 w-4 text-white"}),u||0,s?.limits.whatsapp_connections,u),c("Agents",e.jsx(V,{className:"h-4 w-4 text-white"}),p||0,s?.limits.agents,p),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 flex flex-wrap gap-4",children:[e.jsxs(d,{href:route("app.billing.usage",{}),className:"inline-flex items-center gap-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:["View detailed usage",e.jsx(N,{className:"h-4 w-4"})]}),e.jsxs(d,{href:route("app.billing.history",{}),className:"inline-flex items-center gap-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:["View payment history",e.jsx(N,{className:"h-4 w-4"})]})]})]})]})]})]})}export{oe as default};
