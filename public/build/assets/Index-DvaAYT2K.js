import{r as L,j as e}from"./react-B_HteL0F.js";import{u as R,H as Y,j as w,l as i,W as H,C as I,e as v,d as O,M as V,F as z,Z as E,U as W,m as k}from"./vendor-GYTC5Pip.js";import{A as Z}from"./AppShell-HrBHfcoG.js";import{C as _,a as C,b as D,d as S,c as T}from"./Card-CUbeq4wI.js";import{B as q}from"./Topbar-CPirX8py.js";import{B as x}from"./app-C0WBMkkY.js";import{P as G}from"./Progress-sBJ7b9s6.js";import{u as J}from"./useToast-Rch7lQVh.js";import{u as K}from"./useNotifications-TrBdqubX.js";import{A as P}from"./Alert-BvOoLVKy.js";import"./GlobalFlashHandler-DpywDQft.js";import"./BrandingWrapper-DIBfDp2T.js";/* empty css            */function xe({workspace:l,subscription:a,plan:t,usage:f,current_connections_count:y,current_agents_count:b}){const{auth:M,flash:o}=R().props,{addToast:u}=J(),{confirm:A}=K(),j=l.owner_id===M?.user?.id;L.useEffect(()=>{o?.success&&u({title:o.success,variant:"success"}),o?.error&&u({title:o.error,variant:"error"})},[o,u]);const U=r=>{const n={trialing:{variant:"default",label:"Trial"},active:{variant:"success",label:"Active"},past_due:{variant:"warning",label:"Past Due"},canceled:{variant:"danger",label:"Canceled"}}[r]||{variant:"default",label:r};return e.jsx(q,{variant:n.variant,className:"px-3 py-1",children:n.label})},N=(r,s)=>{if(r===null)return"Custom";if(r===0)return"Free";const n=r/100;return new Intl.NumberFormat("en-IN",{style:"currency",currency:s,minimumFractionDigits:0}).format(n)},B=(r,s)=>!s||s===-1||s===9999||s===9999999?0:Math.min(r/s*100,100),h=a?(r=>{if(!r)return null;const s=new Date,d=new Date(r).getTime()-s.getTime(),c=Math.ceil(d/(1e3*60*60*24));return c>0?c:0})(a.trial_ends_at):null,m=(r,s,n,d,c)=>{if(d===void 0)return null;const p=d===-1||d===9999||d===9999999,g=p?0:B(n,d),F=g>=90?"danger":g>=75?"warning":"default";return e.jsxs("div",{className:"p-5 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:s}),e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:r})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:[n.toLocaleString()," / ",p?"âˆž":d.toLocaleString(),c!==void 0&&e.jsxs("span",{className:"ml-1 text-xs text-gray-500 font-normal",children:["(",c," active)"]})]})]}),!p&&e.jsxs(e.Fragment,{children:[e.jsx(G,{value:g,variant:F,className:"h-2.5"}),g>=90&&e.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:["Near limit. ",e.jsx(i,{href:route("app.billing.plans",{workspace:l.slug}),className:"underline hover:no-underline",children:"Upgrade"})]})]})]})};return e.jsxs(Z,{children:[e.jsx(Y,{title:"Billing Overview"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Billing Overview"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Manage your subscription and view usage"})]}),a?.status==="past_due"&&e.jsxs(P,{variant:"warning",className:"border-yellow-200 dark:border-yellow-800",children:[e.jsx(w,{className:"h-5 w-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-1",children:"Payment Past Due"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mb-3",children:"Your subscription payment is past due. Please update your payment method to continue using all features."}),a.last_error&&e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 italic mb-3",children:a.last_error}),e.jsx(i,{href:route("app.billing.plans",{workspace:l.slug}),children:e.jsx(x,{variant:"secondary",size:"sm",className:"rounded-xl",children:"Update Payment"})})]})]}),a?.status==="canceled"&&e.jsxs(P,{variant:"error",className:"border-red-200 dark:border-red-800",children:[e.jsx(w,{className:"h-5 w-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-200 mb-1",children:"Subscription Canceled"}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mb-3",children:["Your subscription was canceled on ",a.canceled_at?new Date(a.canceled_at).toLocaleDateString():"a previous date",". You can reactivate it or choose a new plan."]}),e.jsx(i,{href:route("app.billing.plans",{workspace:l.slug}),children:e.jsx(x,{variant:"secondary",size:"sm",className:"rounded-xl",children:"View Plans"})})]})]}),e.jsxs(_,{className:"border-0 shadow-lg",children:[e.jsx(C,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-xl",children:e.jsx(H,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx(D,{className:"text-xl font-bold",children:"Current Plan"}),e.jsx(S,{children:"Your active subscription details"})]})]}),a&&U(a.status)]})}),e.jsx(T,{className:"p-6",children:t?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:t.name})}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monthly"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:N(t.price_monthly,t.currency)})]}),t.price_yearly&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Yearly"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:N(t.price_yearly,t.currency)})]})]}),a?.status==="trialing"&&h!==null&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-blue-800 dark:text-blue-200",children:[h," ",h===1?"day":"days"," left in trial"]}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["Trial ends on ",a.trial_ends_at?new Date(a.trial_ends_at).toLocaleDateString():"soon"]})]})]})}),a?.cancel_at_period_end&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl border border-yellow-200 dark:border-yellow-800",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-medium",children:["Subscription will be canceled on"," ",a.current_period_end?new Date(a.current_period_end).toLocaleDateString():"period end"]})}),e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(i,{href:route("app.billing.plans",{workspace:l.slug}),children:e.jsx(x,{className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/50 rounded-xl",children:"Change Plan"})}),j&&a&&a.status==="active"&&!a.cancel_at_period_end&&e.jsx(x,{variant:"secondary",onClick:async()=>{await A({title:"Cancel Subscription",message:"Are you sure you want to cancel your subscription?",variant:"warning"})&&v.post(route("app.billing.cancel",{workspace:l.slug}))},className:"rounded-xl",children:"Cancel Subscription"}),j&&a&&a.cancel_at_period_end&&e.jsx(x,{variant:"success",onClick:()=>{v.post(route("app.billing.resume",{workspace:l.slug}))},className:"rounded-xl",children:"Resume Subscription"})]})]}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No plan assigned"})})]}),e.jsxs(_,{className:"border-0 shadow-lg",children:[e.jsx(C,{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl",children:e.jsx(O,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx(D,{className:"text-xl font-bold",children:"Current Usage (This Month)"}),e.jsx(S,{children:"Track your usage against plan limits"})]})]})})}),e.jsxs(T,{className:"p-6 space-y-4",children:[m("Messages Sent",e.jsx(V,{className:"h-4 w-4 text-white"}),f.messages_sent,t?.limits.messages_monthly),m("Template Sends",e.jsx(z,{className:"h-4 w-4 text-white"}),f.template_sends,t?.limits.template_sends_monthly),m("WhatsApp Connections",e.jsx(E,{className:"h-4 w-4 text-white"}),y||0,t?.limits.whatsapp_connections,y),m("Agents",e.jsx(W,{className:"h-4 w-4 text-white"}),b||0,t?.limits.agents,b),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 flex flex-wrap gap-4",children:[e.jsxs(i,{href:route("app.billing.usage",{workspace:l.slug}),className:"inline-flex items-center gap-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:["View detailed usage",e.jsx(k,{className:"h-4 w-4"})]}),e.jsxs(i,{href:route("app.billing.history",{workspace:l.slug}),className:"inline-flex items-center gap-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:["View payment history",e.jsx(k,{className:"h-4 w-4"})]})]})]})]})]})]})}export{xe as default};
