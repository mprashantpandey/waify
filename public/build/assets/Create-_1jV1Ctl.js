import{j as e}from"./react-BhzSerM2.js";import{G as T,H as F,l as u,N as O,a7 as B,a0 as g,B as f,C as D}from"./vendor-DxGhd0kb.js";import{A as z}from"./AppShell-CkAdHkwF.js";import{C as w,b as v,c as N,d as y,a as b}from"./Card-2LWG2Pxg.js";import{B as d}from"./app-LxBsIpMW.js";import{T as x}from"./TextInput-DRXLElIV.js";import{L as o}from"./Label-Ceizej24.js";import{S as H,a as V,b as W,c as q,d as E}from"./Select-cT_xZvQn.js";import{T as G}from"./Textarea-Ci3bK4sU.js";import{A as C}from"./Alert-u745Uvig.js";import{u as P}from"./useToast-m6H8bvjE.js";import"./Topbar-C479R05n.js";import"./Badge-DpSbAfCU.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./BrandingWrapper-DK418oSm.js";import"./CookieConsentBanner-RgCHAFaX.js";/* empty css            */function de({account:U,connections:p}){const{toast:h}=P(),{data:i,setData:l,post:_,processing:j,errors:a}=T({whatsapp_connection_id:p?.[0]?.id?.toString()||"",name:"",button_text:"",description:"",footer_text:"",sections:[{title:"",rows:[{id:"",title:"",description:""}]}]}),k=()=>{if(i.sections.length>=10){h.error("Maximum 10 sections allowed");return}l("sections",[...i.sections,{title:"",rows:[{id:"",title:"",description:""}]}])},S=t=>{const s=[...i.sections];s.splice(t,1),l("sections",s)},M=(t,s,c)=>{const r=[...i.sections];r[t]={...r[t],[s]:c},l("sections",r)},L=t=>{const s=[...i.sections];if(s[t].rows.length>=10){h.error("Maximum 10 rows per section allowed");return}if(s.reduce((r,n)=>r+n.rows.length,0)>=10){h.error("Maximum 10 total rows across all sections");return}s[t].rows.push({id:"",title:"",description:""}),l("sections",s)},R=(t,s)=>{const c=[...i.sections];c[t].rows.splice(s,1),c[t].rows.length===0&&c[t].rows.push({id:"",title:"",description:""}),l("sections",c)},m=(t,s,c,r)=>{const n=[...i.sections];n[t].rows[s]={...n[t].rows[s],[c]:r},l("sections",n)},$=t=>{t.preventDefault(),_(route("app.whatsapp.lists.store",{}),{onSuccess:()=>{h.success("List created successfully")},onError:s=>{h.error("Failed to create list",Object.values(s).flat().join(", "))}})},A=i.sections.reduce((t,s)=>t+s.rows.length,0);return e.jsxs(z,{children:[e.jsx(F,{title:"Create WhatsApp List"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{href:route("app.whatsapp.lists.index",{}),children:e.jsxs(d,{variant:"ghost",size:"sm",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Back"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Create List"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Create an interactive list message for WhatsApp"})]})]}),e.jsxs(C,{variant:"info",className:"mb-6",children:[e.jsx(B,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"List Message Guidelines"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Button text: Max 20 characters"}),e.jsx("li",{children:"Description: Max 1024 characters (optional)"}),e.jsx("li",{children:"Footer: Max 60 characters (optional)"}),e.jsx("li",{children:"Max 10 sections, each with max 10 rows"}),e.jsx("li",{children:"Total rows across all sections: Max 10"}),e.jsx("li",{children:"Section title: Max 24 characters"}),e.jsx("li",{children:"Row ID: Max 200 characters (unique identifier)"}),e.jsx("li",{children:"Row title: Max 24 characters"}),e.jsx("li",{children:"Row description: Max 72 characters (optional)"})]})]})]}),e.jsxs("form",{onSubmit:$,className:"space-y-6",children:[e.jsxs(w,{children:[e.jsxs(v,{children:[e.jsx(N,{children:"Basic Information"}),e.jsx(y,{children:"Configure the list name and connection"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"connection",children:"WhatsApp Connection *"}),e.jsxs(H,{value:i.whatsapp_connection_id,onValueChange:t=>l("whatsapp_connection_id",t),children:[e.jsx(V,{children:e.jsx(W,{placeholder:"Select connection"})}),e.jsx(q,{children:p.map(t=>e.jsx(E,{value:t.id.toString(),children:t.name},t.id))})]}),a.whatsapp_connection_id&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a.whatsapp_connection_id})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",children:"List Name *"}),e.jsx(x,{id:"name",value:i.name,onChange:t=>l("name",t.target.value),placeholder:"e.g., Product Catalog, Support Options",maxLength:255}),a.name&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a.name})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"button_text",children:"Button Text * (Max 20 chars)"}),e.jsx(x,{id:"button_text",value:i.button_text,onChange:t=>l("button_text",t.target.value),placeholder:"e.g., View Options, Browse",maxLength:20}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[i.button_text.length,"/20 characters"]}),a.button_text&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a.button_text})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"description",children:"Description (Optional, Max 1024 chars)"}),e.jsx(G,{id:"description",value:i.description||"",onChange:t=>l("description",t.target.value),placeholder:"Optional description text",maxLength:1024,rows:3}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(i.description||"").length,"/1024 characters"]}),a.description&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a.description})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"footer_text",children:"Footer Text (Optional, Max 60 chars)"}),e.jsx(x,{id:"footer_text",value:i.footer_text||"",onChange:t=>l("footer_text",t.target.value),placeholder:"Optional footer text",maxLength:60}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(i.footer_text||"").length,"/60 characters"]}),a.footer_text&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a.footer_text})]})]})]}),e.jsxs(w,{children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Sections & Rows"}),e.jsxs(y,{children:["Configure list sections and rows (",i.sections.length," sections, ",A," ","rows)"]})]}),e.jsxs(d,{type:"button",onClick:k,variant:"secondary",size:"sm",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Add Section"]})]})}),e.jsxs(b,{className:"space-y-6",children:[i.sections.map((t,s)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:["Section ",s+1]}),i.sections.length>1&&e.jsx(d,{type:"button",onClick:()=>S(s),variant:"ghost",size:"sm",children:e.jsx(f,{className:"h-4 w-4 text-red-500"})})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Section Title * (Max 24 chars)"}),e.jsx(x,{value:t.title,onChange:c=>M(s,"title",c.target.value),placeholder:"Section title",maxLength:24}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[t.title.length,"/24 characters"]}),a[`sections.${s}.title`]&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a[`sections.${s}.title`]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{children:["Rows (",t.rows.length,"/10)"]}),e.jsxs(d,{type:"button",onClick:()=>L(s),variant:"secondary",size:"sm",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Add Row"]})]}),t.rows.map((c,r)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["Row ",r+1]}),t.rows.length>1&&e.jsx(d,{type:"button",onClick:()=>R(s,r),variant:"ghost",size:"sm",children:e.jsx(f,{className:"h-3 w-3 text-red-500"})})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-xs",children:"Row ID * (Max 200 chars)"}),e.jsx(x,{value:c.id,onChange:n=>m(s,r,"id",n.target.value),placeholder:"Unique identifier (e.g., product_1)",maxLength:200,className:"text-sm"}),a[`sections.${s}.rows.${r}.id`]&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:a[`sections.${s}.rows.${r}.id`]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-xs",children:"Row Title * (Max 24 chars)"}),e.jsx(x,{value:c.title,onChange:n=>m(s,r,"title",n.target.value),placeholder:"Row title",maxLength:24,className:"text-sm"}),a[`sections.${s}.rows.${r}.title`]&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:a[`sections.${s}.rows.${r}.title`]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-xs",children:"Row Description (Optional, Max 72 chars)"}),e.jsx(x,{value:c.description||"",onChange:n=>m(s,r,"description",n.target.value),placeholder:"Optional description",maxLength:72,className:"text-sm"}),a[`sections.${s}.rows.${r}.description`]&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:a[`sections.${s}.rows.${r}.description`]})]})]},r))]})]},s)),a.sections&&e.jsxs(C,{variant:"error",children:[e.jsx(D,{className:"h-5 w-5"}),e.jsx("div",{children:Array.isArray(a.sections)?e.jsx("ul",{className:"list-disc list-inside",children:a.sections.map((t,s)=>e.jsx("li",{children:t},s))}):e.jsx("p",{children:a.sections})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(u,{href:route("app.whatsapp.lists.index",{}),children:e.jsx(d,{type:"button",variant:"secondary",children:"Cancel"})}),e.jsx(d,{type:"submit",disabled:j,children:j?"Creating...":"Create List"})]})]})]})]})}export{de as default};
