import{r as F,j as e}from"./react-BhzSerM2.js";import{u as w,G as S,H as I,l as _,N as D,a8 as M}from"./vendor-DxGhd0kb.js";import{P as L}from"./PlatformShell-BRZ5kzkj.js";import{C as m,b as h,c as x,d as p,a as u}from"./Card-BQiuQfXG.js";import{B as y}from"./app-DAXd03gX.js";import{I as l}from"./Input-CAZ_yYBI.js";import{L as t}from"./Label-zHrWoQj8.js";import{S as v}from"./Switch-YwmGpMAh.js";import{u as T}from"./useToast-m6H8bvjE.js";import"./Topbar-DGBYSxei.js";import"./Badge-BxV76wwp.js";import"./BrandingWrapper-DK418oSm.js";import"./GlobalFlashHandler-xHP6pVTU.js";/* empty css            */function J({modules:f,default_currency:b="USD"}){const{auth:N,flash:c}=w().props,{addToast:o}=T();F.useEffect(()=>{c?.success&&o({title:"Success",description:c.success,variant:"success"}),c?.error&&o({title:"Error",description:c.error,variant:"error"})},[c,o]);const{data:r,setData:a,post:C,processing:j,errors:i}=S({key:"",name:"",description:"",price_monthly:null,price_yearly:null,is_active:!0,is_public:!0,trial_days:0,sort_order:0,limits:{agents:1,whatsapp_connections:1,messages_monthly:500,template_sends_monthly:0,ai_credits_monthly:0,retention_days:30},modules:[]}),k=s=>{s.preventDefault(),C(route("platform.plans.store"),{onSuccess:()=>{o({title:"Plan Created",description:"The plan has been created successfully.",variant:"success"})},onError:n=>{o({title:"Error",description:Object.values(n)[0]||"Failed to create plan. Please check the form.",variant:"error"})}})},P=s=>{const n=r.modules||[];n.includes(s)?a("modules",n.filter(g=>g!==s)):a("modules",[...n,s])},d=(s,n)=>{const g=n===""||n==="-1"?-1:parseInt(n)||0;a("limits",{...r.limits,[s]:g})};return e.jsxs(L,{auth:N,children:[e.jsx(I,{title:"Create Plan"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_,{href:route("platform.plans.index"),children:e.jsxs(y,{variant:"ghost",size:"sm",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Back to Plans"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Create Plan"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Create a new subscription plan"})]})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsx(x,{children:"Basic Information"}),e.jsx(p,{children:"Plan identification and basic details"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"key",children:"Plan Key *"}),e.jsx(l,{id:"key",value:r.key,onChange:s=>a("key",s.target.value),placeholder:"starter",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Unique identifier (lowercase, no spaces, e.g., "starter", "pro")'}),i.key&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.key})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"name",children:"Plan Name *"}),e.jsx(l,{id:"name",value:r.name,onChange:s=>a("name",s.target.value),placeholder:"Starter Plan",required:!0}),i.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.name})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:r.description,onChange:s=>a("description",s.target.value),rows:3,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100",placeholder:"Perfect for small teams"}),i.description&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"sort_order",children:"Sort Order"}),e.jsx(l,{id:"sort_order",type:"number",value:r.sort_order,onChange:s=>a("sort_order",parseInt(s.target.value)||0),min:"0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"trial_days",children:"Trial Days"}),e.jsx(l,{id:"trial_days",type:"number",value:r.trial_days,onChange:s=>a("trial_days",parseInt(s.target.value)||0),min:"0"})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Currency"}),e.jsxs("div",{className:"mt-1 p-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Plans use the platform default currency: ",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:b})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"To change the currency, update it in Platform Settings → Payment"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"is_active",children:"Active"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Plan is available for selection"})]}),e.jsx(v,{id:"is_active",checked:r.is_active,onCheckedChange:s=>a("is_active",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"is_public",children:"Public"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Visible to tenant owners in plans page"})]}),e.jsx(v,{id:"is_public",checked:r.is_public,onCheckedChange:s=>a("is_public",s)})]})]})]}),e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsx(x,{children:"Pricing"}),e.jsx(p,{children:"Set monthly and yearly pricing (in cents/paisa)"})]}),e.jsx(u,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"price_monthly",children:"Monthly Price (cents/paisa)"}),e.jsx(l,{id:"price_monthly",type:"number",value:r.price_monthly||"",onChange:s=>a("price_monthly",s.target.value?parseInt(s.target.value):null),placeholder:"99900",min:"0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.price_monthly?`₹${(r.price_monthly/100).toFixed(2)}`:"Free or custom pricing"}),i.price_monthly&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.price_monthly})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"price_yearly",children:"Yearly Price (cents/paisa)"}),e.jsx(l,{id:"price_yearly",type:"number",value:r.price_yearly||"",onChange:s=>a("price_yearly",s.target.value?parseInt(s.target.value):null),placeholder:"999000",min:"0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.price_yearly?`₹${(r.price_yearly/100).toFixed(2)}`:"Free or custom pricing"}),i.price_yearly&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.price_yearly})]})]})})]}),e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsx(x,{children:"Limits"}),e.jsx(p,{children:"Set resource limits for this plan (-1 for unlimited)"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"limit_agents",children:"Agents"}),e.jsx(l,{id:"limit_agents",type:"number",value:r.limits.agents===-1?"":r.limits.agents,onChange:s=>d("agents",s.target.value),placeholder:"-1 for unlimited"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"limit_connections",children:"WhatsApp Connections"}),e.jsx(l,{id:"limit_connections",type:"number",value:r.limits.whatsapp_connections===-1?"":r.limits.whatsapp_connections,onChange:s=>d("whatsapp_connections",s.target.value),placeholder:"-1 for unlimited"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"limit_messages",children:"Messages Monthly"}),e.jsx(l,{id:"limit_messages",type:"number",value:r.limits.messages_monthly===-1?"":r.limits.messages_monthly,onChange:s=>d("messages_monthly",s.target.value),placeholder:"-1 for unlimited"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"limit_templates",children:"Template Sends Monthly"}),e.jsx(l,{id:"limit_templates",type:"number",value:r.limits.template_sends_monthly===-1?"":r.limits.template_sends_monthly,onChange:s=>d("template_sends_monthly",s.target.value),placeholder:"-1 for unlimited"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"limit_ai_credits",children:"AI Credits Monthly"}),e.jsx(l,{id:"limit_ai_credits",type:"number",value:r.limits.ai_credits_monthly===-1?"":r.limits.ai_credits_monthly,onChange:s=>d("ai_credits_monthly",s.target.value),placeholder:"-1 for unlimited"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"limit_retention",children:"Data Retention (Days)"}),e.jsx(l,{id:"limit_retention",type:"number",value:r.limits.retention_days===-1?"":r.limits.retention_days,onChange:s=>d("retention_days",s.target.value),placeholder:"-1 for unlimited"})]})]}),i.limits&&e.jsx("p",{className:"text-sm text-red-600",children:i.limits})]})]}),e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsx(x,{children:"Modules"}),e.jsx(p,{children:"Select which modules are included in this plan"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:f.map(s=>e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("input",{type:"checkbox",checked:r.modules.includes(s.key),onChange:()=>P(s.key),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.name})]},s.id))}),i.modules&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:i.modules})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(_,{href:route("platform.plans.index"),children:e.jsx(y,{variant:"secondary",type:"button",children:"Cancel"})}),e.jsxs(y,{type:"submit",disabled:j,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),j?"Creating...":"Create Plan"]})]})]})]})]})}export{J as default};
