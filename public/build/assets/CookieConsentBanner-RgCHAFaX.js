import{r,j as d}from"./react-BhzSerM2.js";import{u as x}from"./vendor-DxGhd0kb.js";import{B as y}from"./app-LxBsIpMW.js";const _="waify.cookie-consent";function S(){const{analyticsSettings:c,compliance:l,features:p}=x().props,[n,a]=r.useState(null),t=l?.cookie_consent_required??!1,g=r.useMemo(()=>t?n===null?!1:n==="accepted":!0,[t,n]);return r.useEffect(()=>{if(!t){a("accepted");return}const m=window.localStorage.getItem(_);a(m);const i=u=>{const o=u.detail;(o==="accepted"||o==="declined")&&a(o)};return window.addEventListener("waify:cookie-consent",i),()=>{window.removeEventListener("waify:cookie-consent",i)}},[t]),r.useEffect(()=>{if(!g||!c||p&&p.analytics===!1)return;const{google_analytics_enabled:m,google_analytics_id:i,mixpanel_enabled:u,mixpanel_token:o,sentry_enabled:h,sentry_dsn:f,sentry_environment:b}=c;if(m&&i&&!document.getElementById("ga-script")){const e=document.createElement("script");e.id="ga-script",e.async=!0,e.src=`https://www.googletagmanager.com/gtag/js?id=${i}`,document.head.appendChild(e);const s=document.createElement("script");s.id="ga-inline",s.innerHTML=`
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', '${i}');
            `,document.head.appendChild(s)}if(u&&o&&!document.getElementById("mixpanel-script")){const e=document.createElement("script");e.id="mixpanel-script",e.innerHTML=`
                (function(f,b){if(!b.__SV){var e,g,i,h;window.mixpanel=b;b._i=[];b.init=function(e,f,c){function g(a,d){var b=d.split(".");2==b.length&&(a=a[b[0]],d=b[1]);a[d]=function(){a.push([d].concat(Array.prototype.slice.call(arguments,0)))}}var a=b;"undefined"!==typeof c?a=b[c]=[]:c="mixpanel";a.people=a.people||[];a.toString=function(a){var d="mixpanel";"mixpanel"!==c&&(d+="."+c);a||(d+=" (stub)");return d};a.people.toString=function(){return a.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");for(h=0;h<i.length;h++)g(a,i[h]);b._i.push([e,f,c])};b.__SV=1.2;e=f.createElement("script");e.type="text/javascript";e.async=!0;e.src="https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";g=f.getElementsByTagName("script")[0];g.parentNode.insertBefore(e,g)}})(document,window.mixpanel||[]);
                mixpanel.init('${o}');
            `,document.head.appendChild(e)}if(h&&f&&!document.getElementById("sentry-script")){const e=document.createElement("script");e.id="sentry-script",e.src="https://browser.sentry-cdn.com/7.118.0/bundle.tracing.min.js",e.crossOrigin="anonymous",e.onload=()=>{const s=window.Sentry;s&&s.init({dsn:f,environment:b||"production",tracesSampleRate:.1})},document.head.appendChild(e)}},[c,g]),null}const w="waify.cookie-consent";function C(){const{compliance:c}=x().props,l=c?.cookie_consent_required??!1,[p,n]=r.useState(!1);r.useEffect(()=>{if(!l)return;const t=window.localStorage.getItem(w);n(t!=="accepted"&&t!=="declined")},[l]);const a=t=>{window.localStorage.setItem(w,t),window.dispatchEvent(new CustomEvent("waify:cookie-consent",{detail:t})),n(!1)};return!l||!p?null:d.jsxs("div",{className:"fixed bottom-4 left-4 right-4 z-50 max-w-3xl mx-auto bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 shadow-lg rounded-xl p-4 flex flex-col sm:flex-row sm:items-center gap-4",children:[d.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"We use cookies to improve your experience and measure product performance. You can accept or decline non-essential cookies."}),d.jsxs("div",{className:"flex items-center gap-2 sm:ml-auto",children:[d.jsx(y,{variant:"ghost",size:"sm",onClick:()=>a("declined"),children:"Decline"}),d.jsx(y,{size:"sm",onClick:()=>a("accepted"),children:"Accept"})]})]})}export{S as A,C};
