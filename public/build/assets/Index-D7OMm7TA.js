import{r,j as e}from"./react-BhzSerM2.js";import{u as k,H as v,e as _,l as w}from"./vendor-DxGhd0kb.js";import{P as C}from"./PlatformShell-BRZ5kzkj.js";import{C as u,b as h,c as y,d as b,a as f}from"./Card-BQiuQfXG.js";import{a as S}from"./app-DAXd03gX.js";import"./Topbar-DGBYSxei.js";import"./Badge-BxV76wwp.js";import"./BrandingWrapper-DK418oSm.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./useToast-m6H8bvjE.js";/* empty css            */function U({threads:i}){const{branding:a}=k().props,{subscribe:x}=S(),[m,p]=r.useState(i),[j,g]=r.useState(!1);r.useEffect(()=>{p(i)},[i]),r.useEffect(()=>{const t=x("platform.support","support.message.created",o=>{o.thread_id&&p(l=>{const n=l.findIndex(N=>N.id===o.thread_id);if(n===-1)return g(!0),l;const d=[...l],c={...d[n]};return c.last_message_at=o.created_at??c.last_message_at,d.splice(n,1),d.unshift(c),d})});return()=>{t()}},[x]);const s=r.useMemo(()=>({email:a?.support_email,phone:a?.support_phone}),[a?.support_email,a?.support_phone]);return e.jsxs(C,{children:[e.jsx(v,{title:"Support Requests"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Support Requests"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All tenant support conversations"})]}),e.jsxs(u,{className:"border-0 shadow-lg",children:[e.jsxs(h,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",children:[e.jsx(y,{className:"text-xl font-bold",children:"Live Chat Access"}),e.jsx(b,{children:"Ways tenants can reach your support team"})]}),e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Support Inbox"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tenants can create tickets from their Support page."})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Email & Phone"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:s.email||s.phone?`${s.email??"—"} ${s.phone?`· ${s.phone}`:""}`:"Set support email/phone in Platform Settings → Branding."})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Live Chat Widget"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Use the live chat bubble at the bottom-right of the screen."})]})]})})]}),e.jsxs(u,{className:"border-0 shadow-lg",children:[e.jsxs(h,{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:[e.jsx(y,{className:"text-xl font-bold",children:"Threads"}),e.jsx(b,{children:"Recent messages from tenants"})]}),e.jsxs(f,{className:"p-0",children:[j&&e.jsxs("div",{className:"px-6 py-3 border-b border-gray-200 dark:border-gray-800 bg-yellow-50/60 dark:bg-yellow-900/10 text-sm text-gray-700 dark:text-gray-200 flex items-center justify-between",children:[e.jsx("span",{children:"New support activity available."}),e.jsx("button",{onClick:()=>{g(!1),_.reload({only:["threads"]})},className:"text-xs font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:"Refresh"})]}),e.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:[m.length===0&&e.jsx("div",{className:"p-6 text-sm text-gray-500 dark:text-gray-400",children:"No support requests yet."}),m.map(t=>e.jsx(w,{href:route("platform.support.show",{thread:t.slug??t.id}),className:"block px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-800/40 transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.subject}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Tenant: ",t.account?.name??"Unknown"]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.last_message_at?new Date(t.last_message_at).toLocaleString():"—"})]})},t.id))]})]})]})]})]})}export{U as default};
