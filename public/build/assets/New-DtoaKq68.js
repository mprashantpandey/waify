import{r as n,j as e}from"./react-BhzSerM2.js";import{H as g,l as u,N as y,am as j,ao as b,M as f,e as v}from"./vendor-DxGhd0kb.js";import{A as N}from"./AppShell-hblPOeic.js";import{B as w}from"./app-CHptu5EX.js";import{T as C}from"./TextInput-DRXLElIV.js";import{C as k,b as S,c as D,d as _,a as A}from"./Card-Cf3anJdB.js";import"./Topbar-DAizFNof.js";import"./Badge-DOejrt-x.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./useToast-m6H8bvjE.js";import"./BrandingWrapper-DK418oSm.js";import"./Alert-B2z6wKx8.js";import"./CookieConsentBanner-BIdbL3YD.js";/* empty css            */function J({account:I,contacts:l,connections:r}){const[s,m]=n.useState(""),[t,x]=n.useState(null),[i,h]=n.useState(r.length===1?r[0].id:""),[o,d]=n.useState(!1),c=l.filter(a=>!s.trim()||(a.name||"").toLowerCase().includes(s.toLowerCase())||(a.wa_id||"").includes(s)),p=()=>{if(!t)return;d(!0);const a=r.length>1&&i?route("app.whatsapp.conversations.by-contact",{contact:t.slug||t.id})+`?connection_id=${i}`:route("app.whatsapp.conversations.by-contact",{contact:t.slug||t.id});v.visit(a,{onFinish:()=>d(!1)})};return e.jsxs(N,{children:[e.jsx(g,{title:"New conversation"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(u,{href:route("app.whatsapp.conversations.index"),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:[e.jsx(y,{className:"h-4 w-4"}),"Back to Inbox"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"New conversation"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Choose a contact to open or start a chat"})]}),e.jsxs(k,{children:[e.jsxs(S,{children:[e.jsx(D,{children:"Select contact"}),e.jsx(_,{children:"Search and pick a contact to open the conversation in Inbox"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400","aria-hidden":!0}),e.jsx(C,{type:"search",value:s,onChange:a=>m(a.target.value),placeholder:"Search contacts by name or number...",className:"pl-9","aria-label":"Search contacts"})]}),r.length>1&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"connection",className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"WhatsApp number"}),e.jsxs("select",{id:"connection",value:i,onChange:a=>h(a.target.value===""?"":Number(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#25D366] focus:ring-[#25D366] dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("option",{value:"",children:"Select a number"}),r.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto rounded-lg border border-gray-200 dark:border-gray-700",children:c.length===0?e.jsx("div",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:l.length===0?"No contacts yet. Add contacts from the Contacts section.":"No contacts match your search."}):e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.map(a=>e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>x(a),className:`flex w-full items-center justify-between px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-800/50 ${t?.id===a.id?"bg-[#25D366]/10 text-[#25D366] dark:bg-[#25D366]/20":""}`,children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.name||a.wa_id}),a.wa_id&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.wa_id})]})},a.id))})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(w,{onClick:p,disabled:!t||o||r.length>1&&!i,className:"bg-[#25D366] hover:bg-[#1DAA57] text-white","aria-label":"Open chat",children:[o?e.jsx(b,{className:"h-4 w-4 mr-2 animate-spin","aria-hidden":!0}):e.jsx(f,{className:"h-4 w-4 mr-2","aria-hidden":!0}),"Open chat"]}),t&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["with ",t.name||t.wa_id]})]})]})]})]})]})}export{J as default};
