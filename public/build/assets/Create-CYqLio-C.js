import{r as j,j as e}from"./react-BhzSerM2.js";import{G as Z,H as R,l as _,N as F,C as ee,g as te,a7 as ae,i as re,F as se,b8 as le,b4 as de,aX as ne,b9 as ie,X as oe,a0 as ce,B as xe,e as me,a as he}from"./vendor-DxGhd0kb.js";import{A as L}from"./AppShell-CbiYKKs1.js";import{C as m,a as h,b as y,c as b,d as v}from"./Card-BkWrHWVN.js";import{B as pe}from"./Badge-7KrgCsFM.js";import{B as p}from"./app-NZCbGewm.js";import{T as u}from"./TextInput-DRXLElIV.js";import{L as d}from"./Label-BBsy5XDb.js";import{S as k,a as w,b as E,c as T,d as o}from"./Select-BaxKbGjS.js";import{T as ue}from"./Textarea-BPV8uvsG.js";import{A as ge}from"./Alert-CGcVTa3U.js";import{u as je}from"./useToast-m6H8bvjE.js";import"./Topbar-a6Jf_b6K.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./BrandingWrapper-DK418oSm.js";import"./CookieConsentBanner-BZbYMIzh.js";/* empty css            */const ye=[{code:"en_US",name:"English (US)"},{code:"en_GB",name:"English (UK)"},{code:"es_ES",name:"Spanish (Spain)"},{code:"es_MX",name:"Spanish (Mexico)"},{code:"pt_BR",name:"Portuguese (Brazil)"},{code:"fr_FR",name:"French"},{code:"de_DE",name:"German"},{code:"it_IT",name:"Italian"},{code:"hi_IN",name:"Hindi"},{code:"ja_JP",name:"Japanese"},{code:"ko_KR",name:"Korean"},{code:"zh_CN",name:"Chinese (Simplified)"},{code:"ar_SA",name:"Arabic"},{code:"tr_TR",name:"Turkish"},{code:"ru_RU",name:"Russian"}];function Fe({account:be,connections:f=[]}){const{toast:c}=je(),[g,V]=j.useState(0),[A,G]=j.useState(!1),[U,D]=j.useState(!1),[C,O]=j.useState(null),[B,M]=j.useState(!1),I=j.useRef(null),{data:t,setData:n,post:fe,processing:P,errors:l,reset:Ne}=Z({whatsapp_connection_id:f?.[0]?.id?.toString()||"",name:"",language:"en_US",category:"UTILITY",header_type:"NONE",header_text:"",header_media_url:"",body_text:"",body_examples:[],footer_text:"",buttons:[]}),H=a=>{const r=a.match(/\{\{(\d+)\}\}/g),s=r?r.map(x=>parseInt(x.match(/\d+/)?.[0]||"0")):[],i=s.length>0?Math.max(...s):0;V(i)},X=a=>{n("body_text",a),H(a)},Y=()=>{if((t.buttons?.length||0)>=3){c.error("Maximum 3 buttons allowed");return}n("buttons",[...t.buttons||[],{type:"QUICK_REPLY",text:""}])},$=a=>{const r=[...t.buttons||[]];r.splice(a,1),n("buttons",r)},N=(a,r,s)=>{const i=[...t.buttons||[]];i[a]={...i[a],[r]:s},n("buttons",i)},K=async a=>{if(a){D(!0);try{const r=new FormData;r.append("file",a),r.append("type",t.header_type);const s=await he.post(route("app.whatsapp.templates.upload-media",{}),r);n("header_media_url",s.data.url),O(s.data.url),c.success("File uploaded","Media file uploaded successfully.")}catch(r){c.error("Upload failed",r.response?.data?.error||r.message||"Failed to upload file.")}finally{D(!1)}}},W=a=>{const r=a.target.files?.[0];r&&K(r),I.current&&(I.current.value="")},z=(a,r)=>{const s=[...t.body_examples||[]];s[a]=r,n("body_examples",s)},Q=a=>{if(a.preventDefault(),B)return;if(!t.whatsapp_connection_id){c.error("Please select a WhatsApp connection");return}if(!t.name||t.name.trim()===""){c.error("Template name is required");return}if(!/^[a-zA-Z0-9_]+$/.test(t.name)){c.error("Template name can only contain letters, numbers, and underscores");return}if(!t.body_text||t.body_text.trim()===""){c.error("Body text is required");return}M(!0);const r=t.buttons?.filter(x=>x.text.trim()!=="")||[],s=t.body_examples?.filter(x=>x.trim()!=="")||[],i={whatsapp_connection_id:t.whatsapp_connection_id,name:t.name.trim(),language:t.language,category:t.category,header_type:t.header_type||"NONE",body_text:t.body_text.trim()};t.header_type==="TEXT"&&t.header_text?.trim()?i.header_text=t.header_text.trim():["IMAGE","VIDEO","DOCUMENT"].includes(t.header_type||"")&&t.header_media_url&&(i.header_media_url=t.header_media_url),t.footer_text?.trim()&&(i.footer_text=t.footer_text.trim()),r.length>0&&(i.buttons=r),s.length>0&&(i.body_examples=s),console.log("Submitting template data:",i),me.post(route("app.whatsapp.templates.store",{}),i,{onSuccess:()=>{c.success("Template created successfully! It will be reviewed by Meta."),M(!1)},onError:x=>{if(console.error("Template creation errors:",x),M(!1),x.create)c.error(x.create);else if(Object.keys(x).length>0){const S=Object.values(x)[0],J=Array.isArray(S)?S[0]:S;c.error(J||"Failed to create template. Please check the form for errors.")}else c.error("Failed to create template. Please check the form for errors.")},onFinish:()=>{M(!1)}})},q=()=>{let a=t.body_text||"";for(let r=1;r<=g;r++){const s=t.body_examples?.[r-1]||`Example ${r}`;a=a.replace(new RegExp(`\\{\\{${r}\\}\\}`,"g"),s)}return e.jsxs("div",{className:"space-y-4 p-6 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border-2 border-gray-200 dark:border-gray-700",children:[t.header_type!=="NONE"&&e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2",children:"HEADER"}),t.header_type==="TEXT"&&t.header_text&&e.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:t.header_text}),["IMAGE","VIDEO","DOCUMENT"].includes(t.header_type)&&t.header_media_url&&e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 break-all",children:t.header_media_url})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2",children:"BODY"}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 whitespace-pre-wrap",children:a||"Body text will appear here..."})]}),t.footer_text&&e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2",children:"FOOTER"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.footer_text})]}),t.buttons&&t.buttons.length>0&&e.jsx("div",{className:"space-y-2",children:t.buttons.map((r,s)=>r.text&&e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 text-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:r.text})},s))})]})};return!f||f.length===0?e.jsxs(L,{children:[e.jsx(R,{title:"Create Template"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{href:route("app.whatsapp.templates.index",{}),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(F,{className:"h-4 w-4"}),"Back to Templates"]}),e.jsx(m,{className:"border-0 shadow-xl bg-gradient-to-br from-red-50 via-white to-red-50 dark:from-red-900/20 dark:via-gray-900 dark:to-red-900/20 overflow-hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/5 to-orange-500/5 pointer-events-none"}),e.jsx(h,{className:"p-8 relative",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500 to-orange-500 flex items-center justify-center shadow-lg shadow-red-500/30",children:e.jsx(ee,{className:"h-8 w-8 text-white",strokeWidth:2.5})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"No Active Connections"}),e.jsx("div",{className:"h-1 w-16 bg-gradient-to-r from-red-500 to-orange-500 rounded-full mb-4"}),e.jsx("p",{className:"text-base text-gray-700 dark:text-gray-300 leading-relaxed",children:"You need at least one active WhatsApp connection to create message templates. Create a connection to get started with template management."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-6",children:[e.jsx(_,{href:route("app.whatsapp.connections.index",{}),children:e.jsxs(p,{variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 shadow-lg shadow-blue-500/30 transition-all duration-200",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Create WhatsApp Connection"]})}),e.jsx(_,{href:route("app.whatsapp.templates.index",{}),children:e.jsx(p,{variant:"secondary",children:"View Templates"})})]})]})]})})]})})]})]}):e.jsxs(L,{children:[e.jsx(R,{title:"Create Template"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs(_,{href:route("app.whatsapp.templates.index",{}),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-4",children:[e.jsx(F,{className:"h-4 w-4"}),"Back to Templates"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Create Template"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Create a new WhatsApp message template following Meta's latest guidelines"})]}),e.jsx(p,{variant:"secondary",onClick:()=>G(!A),children:A?"Edit Mode":"Preview Mode"})]})]}),e.jsxs(ge,{variant:"info",className:"border-blue-200 dark:border-blue-800",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-1",children:"Template Guidelines"}),e.jsxs("ul",{className:"text-sm text-blue-600 dark:text-blue-400 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Template name: Alphanumeric and underscores only, max 512 characters"}),e.jsxs("li",{children:["Body text: Max 1024 characters, use ","{{1}}",", ","{{2}}"," for variables"]}),e.jsx("li",{children:"Header: Max 60 characters (TEXT) or media URL (IMAGE/VIDEO/DOCUMENT)"}),e.jsx("li",{children:"Footer: Max 60 characters"}),e.jsx("li",{children:"Buttons: Maximum 3 buttons (QUICK_REPLY, URL, or PHONE_NUMBER)"}),e.jsx("li",{children:"Templates require Meta approval before use"})]})]})]}),l.create&&e.jsx(m,{className:"border-2 border-red-200 dark:border-red-800/50 shadow-lg bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 overflow-hidden",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-orange-500 flex items-center justify-center shadow-md",children:e.jsx(re,{className:"h-6 w-6 text-white",strokeWidth:2.5})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-red-900 dark:text-red-100 mb-2",children:"Error Creating Template"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 leading-relaxed",children:l.create})]})]})})}),e.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[A?e.jsxs(m,{className:"border-0 shadow-lg",children:[e.jsxs(y,{children:[e.jsx(b,{children:"Template Preview"}),e.jsx(v,{children:"How your template will appear to recipients"})]}),e.jsx(h,{children:q()})]}):e.jsxs(e.Fragment,{children:[e.jsxs(m,{className:"border-0 shadow-lg",children:[e.jsx(y,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Basic Information"]})}),e.jsxs(h,{className:"space-y-4 pt-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"connection",children:"WhatsApp Connection *"}),e.jsxs(k,{value:t.whatsapp_connection_id,onValueChange:a=>n("whatsapp_connection_id",a),children:[e.jsx(w,{className:"w-full",children:e.jsx(E,{children:f.find(a=>a.id.toString()===t.whatsapp_connection_id)?.name||"Select connection"})}),e.jsx(T,{children:f.map(a=>e.jsxs(o,{value:a.id.toString(),children:[a.name," ",!a.waba_id&&"(No WABA ID)"]},a.id))})]}),l.whatsapp_connection_id&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l.whatsapp_connection_id})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",children:"Template Name *"}),e.jsx(u,{id:"name",value:t.name,onChange:a=>n("name",a.target.value),placeholder:"my_template_name",className:"font-mono",maxLength:512}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Alphanumeric and underscores only"}),l.name&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"language",children:"Language *"}),e.jsxs(k,{value:t.language,onValueChange:a=>n("language",a),children:[e.jsx(w,{children:e.jsx(E,{})}),e.jsx(T,{children:ye.map(a=>e.jsx(o,{value:a.code,children:a.name},a.code))})]}),l.language&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l.language})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"category",children:"Category *"}),e.jsxs(k,{value:t.category,onValueChange:a=>n("category",a),children:[e.jsx(w,{children:e.jsx(E,{children:t.category==="MARKETING"?"Marketing":t.category==="UTILITY"?"Utility":t.category==="AUTHENTICATION"?"Authentication":"Select category"})}),e.jsxs(T,{children:[e.jsx(o,{value:"MARKETING",children:"Marketing"}),e.jsx(o,{value:"UTILITY",children:"Utility"}),e.jsx(o,{value:"AUTHENTICATION",children:"Authentication"})]})]}),l.category&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l.category})]})]})]}),e.jsxs(m,{className:"border-0 shadow-lg",children:[e.jsxs(y,{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20",children:[e.jsx(b,{children:"Header (Optional)"}),e.jsx(v,{children:"Add a header to your template"})]}),e.jsxs(h,{className:"space-y-4 pt-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"header_type",children:"Header Type"}),e.jsxs(k,{value:t.header_type,onValueChange:a=>{n("header_type",a),(a==="NONE"||a==="TEXT")&&(n("header_media_url",""),O(null))},children:[e.jsx(w,{children:e.jsx(E,{children:t.header_type==="NONE"?"None":t.header_type==="TEXT"?"Text":t.header_type==="IMAGE"?"Image":t.header_type==="VIDEO"?"Video":t.header_type==="DOCUMENT"?"Document":"Select header type"})}),e.jsxs(T,{children:[e.jsx(o,{value:"NONE",children:"None"}),e.jsx(o,{value:"TEXT",children:"Text"}),e.jsx(o,{value:"IMAGE",children:"Image"}),e.jsx(o,{value:"VIDEO",children:"Video"}),e.jsx(o,{value:"DOCUMENT",children:"Document"})]})]})]}),t.header_type==="TEXT"&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"header_text",children:"Header Text *"}),e.jsx(u,{id:"header_text",value:t.header_text||"",onChange:a=>n("header_text",a.target.value),placeholder:"Header text (max 60 characters)",maxLength:60}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(t.header_text||"").length,"/60 characters"]}),l.header_text&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l.header_text})]}),["IMAGE","VIDEO","DOCUMENT"].includes(t.header_type)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"header_media_file",children:"Upload Media *"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{ref:I,type:"file",id:"header_media_file",accept:t.header_type==="IMAGE"?"image/jpeg,image/jpg,image/png,image/gif":t.header_type==="VIDEO"?"video/mp4,video/mov,video/avi":"application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation",onChange:W,className:"hidden",disabled:U}),e.jsxs(p,{type:"button",variant:"secondary",onClick:()=>I.current?.click(),disabled:U,className:"w-full",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),U?"Uploading...":"Choose File"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[t.header_type==="IMAGE"&&"Supported: JPEG, PNG, GIF (max 10MB)",t.header_type==="VIDEO"&&"Supported: MP4, MOV, AVI (max 10MB)",t.header_type==="DOCUMENT"&&"Supported: PDF, DOC, DOCX, XLS, XLSX, PPT, PPTX (max 10MB)"]}),l.header_media_url&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l.header_media_url})]}),(C||t.header_media_url)&&e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.header_type==="IMAGE"&&e.jsx(de,{className:"h-5 w-5 text-blue-600"}),t.header_type==="VIDEO"&&e.jsx(ne,{className:"h-5 w-5 text-blue-600"}),t.header_type==="DOCUMENT"&&e.jsx(ie,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Media uploaded"})]}),e.jsx(p,{type:"button",variant:"ghost",size:"sm",onClick:()=>{n("header_media_url",""),O(null)},children:e.jsx(oe,{className:"h-4 w-4"})})]}),t.header_type==="IMAGE"&&(C||t.header_media_url)&&e.jsx("img",{src:C||t.header_media_url,alt:"Preview",className:"max-w-full h-auto max-h-48 rounded-lg"}),(t.header_type==="VIDEO"||t.header_type==="DOCUMENT")&&e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 break-all",children:C||t.header_media_url})]})]})]})]}),e.jsxs(m,{className:"border-0 shadow-lg",children:[e.jsxs(y,{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",children:[e.jsx(b,{children:"Body *"}),e.jsx(v,{children:"Main message content with optional variables"})]}),e.jsxs(h,{className:"space-y-4 pt-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"body_text",children:"Body Text *"}),e.jsx(ue,{id:"body_text",value:t.body_text,onChange:a=>X(a.target.value),placeholder:"Hello! Your order {{1}} is ready. Pickup time: {{2}}",rows:6,maxLength:1024,className:"font-mono"}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.body_text.length,"/1024 characters"]}),g>0&&e.jsxs(pe,{variant:"info",className:"text-xs",children:[g," variable",g>1?"s":""," detected"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Use ","{{1}}",", ","{{2}}",", etc. for variables"]}),l.body_text&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l.body_text})]}),g>0&&e.jsxs("div",{children:[e.jsx(d,{children:"Variable Examples (Optional)"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Provide example values for preview and testing"}),e.jsx("div",{className:"space-y-2",children:Array.from({length:g},(a,r)=>r+1).map(a=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(u,{value:t.body_examples?.[a-1]||"",onChange:r=>z(a-1,r.target.value),placeholder:`Example for variable {{${a}}}`,className:"flex-1"})},a))})]})]})]}),e.jsxs(m,{className:"border-0 shadow-lg",children:[e.jsxs(y,{className:"bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20",children:[e.jsx(b,{children:"Footer (Optional)"}),e.jsx(v,{children:"Add a footer to your template"})]}),e.jsx(h,{className:"pt-6",children:e.jsxs("div",{children:[e.jsx(d,{htmlFor:"footer_text",children:"Footer Text"}),e.jsx(u,{id:"footer_text",value:t.footer_text||"",onChange:a=>n("footer_text",a.target.value),placeholder:"Footer text (max 60 characters)",maxLength:60}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(t.footer_text||"").length,"/60 characters"]}),l.footer_text&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l.footer_text})]})})]}),e.jsxs(m,{className:"border-0 shadow-lg",children:[e.jsx(y,{className:"bg-gradient-to-r from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Buttons (Optional)"}),e.jsx(v,{children:"Add up to 3 buttons to your template"})]}),(t.buttons?.length||0)<3&&e.jsxs(p,{type:"button",variant:"secondary",size:"sm",onClick:Y,children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Add Button"]})]})}),e.jsx(h,{className:"space-y-4 pt-6",children:t.buttons&&t.buttons.length>0?t.buttons.map((a,r)=>e.jsx(m,{className:"border border-gray-200 dark:border-gray-700",children:e.jsxs(h,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(d,{children:["Button ",r+1]}),e.jsx(p,{type:"button",variant:"ghost",size:"sm",onClick:()=>$(r),children:e.jsx(xe,{className:"h-4 w-4 text-red-600"})})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Button Type *"}),e.jsxs(k,{value:a.type,onValueChange:s=>N(r,"type",s),children:[e.jsx(w,{children:e.jsx(E,{children:a.type==="QUICK_REPLY"?"Quick Reply":a.type==="URL"?"URL":a.type==="PHONE_NUMBER"?"Phone Number":"Select button type"})}),e.jsxs(T,{children:[e.jsx(o,{value:"QUICK_REPLY",children:"Quick Reply"}),e.jsx(o,{value:"URL",children:"URL"}),e.jsx(o,{value:"PHONE_NUMBER",children:"Phone Number"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Button Text *"}),e.jsx(u,{value:a.text,onChange:s=>N(r,"text",s.target.value),placeholder:"Button text (max 20 characters)",maxLength:20}),l[`buttons.${r}.text`]&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l[`buttons.${r}.text`]})]}),a.type==="URL"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(d,{children:"URL *"}),e.jsx(u,{type:"url",value:a.url||"",onChange:s=>N(r,"url",s.target.value),placeholder:"https://example.com"}),l[`buttons.${r}.url`]&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l[`buttons.${r}.url`]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"URL Example (Optional)"}),e.jsx(u,{value:a.url_example||"",onChange:s=>N(r,"url_example",s.target.value),placeholder:"https://example.com/{{1}}"})]})]}),a.type==="PHONE_NUMBER"&&e.jsxs("div",{children:[e.jsx(d,{children:"Phone Number *"}),e.jsx(u,{value:a.phone_number||"",onChange:s=>N(r,"phone_number",s.target.value),placeholder:"+1234567890"}),l[`buttons.${r}.phone_number`]&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l[`buttons.${r}.phone_number`]})]})]})},r)):e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:'No buttons added. Click "Add Button" to add one.'})})})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(_,{href:route("app.whatsapp.templates.index",{}),children:e.jsx(p,{variant:"secondary",children:"Cancel"})}),e.jsx(p,{type:"submit",disabled:B||P,className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/50",children:B||P?"Creating...":"Create Template"})]})]})]})]})}export{Fe as default};
