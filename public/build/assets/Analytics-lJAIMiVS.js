import{r as w,j as e}from"./react-BhzSerM2.js";import{u as S,H as C,M,e as R}from"./vendor-DxGhd0kb.js";import{P}from"./PlatformShell-ButczGpt.js";import{C as d,b as l,c as i,d as n,a as x}from"./Card-DyITSrT5.js";import{B as D}from"./Badge-Dmpsa1zd.js";import{L}from"./Label-BqxKKNxn.js";import"./Topbar-DS5R2nuh.js";import"./BrandingWrapper-DK418oSm.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./useToast-m6H8bvjE.js";import"./app-CUdtZvAA.js";/* empty css            */function _({date_range:j,message_trends:o,message_status_distribution:g,template_performance:m,account_growth:T,subscription_distribution:$,peak_hours:h,top_accounts:y}){const{auth:p}=S().props,[v,N]=w.useState(j),f=t=>{N(t),R.get(route("platform.analytics"),{range:t},{preserveState:!0,preserveScroll:!0})},r=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString(),u=t=>t.length===0?100:Math.max(...t.map(s=>s.count||s.total||0));return e.jsxs(P,{auth:p,children:[e.jsx(C,{title:"Analytics"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Analytics & Reports"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Comprehensive analytics and insights for your platform"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{htmlFor:"date-range",className:"text-sm",children:"Date Range:"}),e.jsxs("select",{id:"date-range",value:v,onChange:t=>f(t.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100",children:[e.jsx("option",{value:"7",children:"Last 7 days"}),e.jsx("option",{value:"30",children:"Last 30 days"}),e.jsx("option",{value:"90",children:"Last 90 days"}),e.jsx("option",{value:"365",children:"Last year"})]})]})]}),e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"Message Trends"}),e.jsx(n,{children:"Message volume over time (inbound vs outbound)"})]}),e.jsx(x,{children:o.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No data available for selected period"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inbound"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Outbound"})]})]}),e.jsx("div",{className:"space-y-2",children:o.map(t=>{const s=u(o),a=t.inbound/s*100,c=t.outbound/s*100;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 text-xs text-gray-600 dark:text-gray-400",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsxs("div",{className:"flex-1 flex items-end gap-1 h-8",children:[e.jsx("div",{className:"bg-blue-500 rounded-t",style:{height:`${a}%`,width:"48%"},title:`Inbound: ${t.inbound}`}),e.jsx("div",{className:"bg-green-500 rounded-t",style:{height:`${c}%`,width:"48%"},title:`Outbound: ${t.outbound}`})]}),e.jsx("div",{className:"w-20 text-right text-xs font-medium text-gray-900 dark:text-gray-100",children:r(t.total)})]},t.date)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"Message Status Distribution"}),e.jsx(n,{children:"Breakdown by delivery status"})]}),e.jsx(x,{children:Object.keys(g).length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No data available"}):e.jsx("div",{className:"space-y-3",children:Object.entries(g).map(([t,s])=>{const a=Object.values(g).reduce((b,k)=>b+k,0),c=a>0?s/a*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 capitalize",children:t}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r(s)," (",c.toFixed(1),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${c}%`}})})]},t)})})})]}),e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"Peak Hours"}),e.jsx(n,{children:"Message activity by hour of day"})]}),e.jsx(x,{children:h.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No data available"}):e.jsx("div",{className:"space-y-2",children:h.map(t=>{const s=u(h),a=t.count/s*100;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-12 text-sm text-gray-600 dark:text-gray-400",children:[t.hour.toString().padStart(2,"0"),":00"]}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-4 dark:bg-gray-700",children:e.jsx("div",{className:"bg-green-600 h-4 rounded-full",style:{width:`${a}%`}})}),e.jsx("div",{className:"w-16 text-right text-sm font-medium text-gray-900 dark:text-gray-100",children:r(t.count)})]},t.hour)})})})]})]}),e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"Template Performance"}),e.jsx(n,{children:"Top performing message templates"})]}),e.jsx(x,{children:m.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No template data available"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Template"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Sent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Delivered"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Read"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Delivery Rate"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map((t,s)=>{const a=t.send_count>0?t.delivered/t.send_count*100:0;return t.send_count>0&&t.read_count/t.send_count*100,e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(D,{variant:t.status==="APPROVED"?"success":"warning",children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:r(t.send_count)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:r(t.delivered)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:r(t.read_count)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${a}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[a.toFixed(1),"%"]})]})})]},s)})})]})})})]}),e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"Top Tenants by Activity"}),e.jsx(n,{children:"Most active tenants in the selected period"})]}),e.jsx(x,{children:y.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No tenant data available"}):e.jsx("div",{className:"space-y-3",children:y.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 font-bold text-sm",children:s+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.slug})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:[r(t.message_count)," messages"]})]})]},t.id))})})]})]})]})}export{_ as default};
