import{r as u,j as e}from"./react-BhzSerM2.js";import{C as v,b as w,c as k,d as C,a as _}from"./Card-C0UbNSBw.js";import{L as i}from"./Label-BxzxgZk1.js";import{T as g}from"./TextInput-DRXLElIV.js";import{B as y}from"./app-DPPhUdLQ.js";import{S as h}from"./Switch-C5desmNY.js";import{B as q}from"./Badge-caKmql8_.js";import{aA as E,a0 as T,am as Q,aQ as G,aR as R,aS as J,aJ as K,aj as P,ay as U,B as V}from"./vendor-DxGhd0kb.js";/* empty css            */function le({data:o,setData:d,errors:c}){const l=o.support?.faqs||[],[b,$]=u.useState(""),[j,L]=u.useState("all"),[F,B]=u.useState(new Set),M=u.useMemo(()=>{const s=new Set;return l.forEach(t=>{t.category&&t.category.trim()&&s.add(t.category)}),Array.from(s).sort()},[l]),f=u.useMemo(()=>{let s=[...l];if(b.trim()){const t=b.toLowerCase();s=s.filter(r=>r.question.toLowerCase().includes(t)||r.answer.toLowerCase().includes(t)||r.tags?.some(a=>a.toLowerCase().includes(t)))}return j!=="all"&&(s=s.filter(t=>t.category===j)),s},[l,b,j]),p=(s,t,r)=>{const a=[...l];a[s]={...a[s],[t]:r},d("support",{...o.support,faqs:a})},S=()=>{const s=l.length>0?Math.max(...l.map(t=>t.order||0))+1:0;d("support",{...o.support,faqs:[...l,{question:"",answer:"",category:"",enabled:!0,order:s,tags:[]}]})},H=s=>{if(confirm("Are you sure you want to delete this FAQ?")){const t=l.filter((r,a)=>a!==s);d("support",{...o.support,faqs:t})}},I=s=>{const t=l[s],r=l.length>0?Math.max(...l.map(a=>a.order||0))+1:0;d("support",{...o.support,faqs:[...l,{...t,question:`${t.question} (Copy)`,order:r}]})},A=(s,t)=>{const r=[...l],a=t==="up"?s-1:s+1;if(a<0||a>=r.length)return;const m=r[s].order||s;r[s].order=r[a].order||a,r[a].order=m,[r[s],r[a]]=[r[a],r[s]],d("support",{...o.support,faqs:r})},O=s=>{const t=new Set(F);t.has(s)?t.delete(s):t.add(s),B(t)},W=(s,t)=>{const a=l[s].tags||[];t.trim()&&!a.includes(t.trim())&&p(s,"tags",[...a,t.trim()])},z=(s,t)=>{const a=l[s].tags||[];p(s,"tags",a.filter((m,n)=>n!==t))},N=u.useMemo(()=>[...l].sort((s,t)=>(s.order||0)-(t.order||0)),[l]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v,{className:"border-0 shadow-lg",children:[e.jsxs(w,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",children:[e.jsx(k,{className:"text-xl font-bold",children:"Support Types"}),e.jsx(C,{children:"Enable or disable support features for all users"})]}),e.jsx(_,{className:"p-6 space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold",children:"Live Chat Widget"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enable the live chat widget for users. When disabled, users will not see the chat widget in their panel."})]}),e.jsx(h,{checked:o.support?.live_chat_enabled??!0,onCheckedChange:s=>d("support",{...o.support,live_chat_enabled:s})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold",children:"Ticket Support"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enable ticket support system. When disabled, users will not be able to create or view support tickets."})]}),e.jsx(h,{checked:o.support?.ticket_support_enabled??!0,onCheckedChange:s=>d("support",{...o.support,ticket_support_enabled:s})})]})})]})})]}),e.jsxs(v,{className:"border-0 shadow-lg",children:[e.jsx(w,{className:"bg-gradient-to-r from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(k,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Support FAQs"]}),e.jsx(C,{children:"Manage common questions shown in the Support Hub"})]}),e.jsxs(y,{type:"button",onClick:S,className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"Add FAQ"]})]})}),e.jsxs(_,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(g,{type:"text",value:b,onChange:s=>$(s.target.value),className:"pl-10",placeholder:"Search FAQs..."})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Category Filter"}),e.jsxs("select",{value:j,onChange:s=>L(s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100",children:[e.jsx("option",{value:"all",children:"All Categories"}),M.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Total: ",l.length]}),e.jsxs("span",{children:["Enabled: ",l.filter(s=>s.enabled!==!1).length]}),e.jsxs("span",{children:["Disabled: ",l.filter(s=>s.enabled===!1).length]}),f.length!==l.length&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["Showing: ",f.length]})]}),N.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:[e.jsx(E,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:"No FAQs yet"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"Add your first FAQ to help users find answers quickly"}),e.jsxs(y,{type:"button",onClick:S,variant:"primary",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Add Your First FAQ"]})]}):f.length===0?e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:[e.jsx(Q,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"No FAQs match your search"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Try adjusting your filters"})]}):e.jsx("div",{className:"space-y-3",children:N.map((s,t)=>{const r=l.findIndex(n=>n===s),a=F.has(r),m=s.enabled!==!1;return e.jsx("div",{className:`rounded-lg border-2 transition-all ${m?"border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900":"border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 opacity-75"}`,children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[e.jsx("button",{type:"button",onClick:()=>A(r,"up"),disabled:t===0,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(R,{className:"h-5 w-5 text-gray-400"}),e.jsx("button",{type:"button",onClick:()=>A(r,"down"),disabled:t===N.length-1,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(J,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[!m&&e.jsxs(q,{variant:"secondary",className:"text-xs",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Disabled"]}),s.category&&e.jsxs(q,{variant:"outline",className:"text-xs",children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),s.category]})]}),e.jsx(i,{htmlFor:`support.faqs.${r}.question`,className:"text-sm font-semibold",children:"Question"}),e.jsx(g,{id:`support.faqs.${r}.question`,type:"text",value:s.question,onChange:n=>p(r,"question",n.target.value),className:"mt-1 block w-full",placeholder:"How do I connect WhatsApp?"}),c?.[`support.faqs.${r}.question`]&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c[`support.faqs.${r}.question`]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(h,{checked:m,onCheckedChange:n=>p(r,"enabled",n),title:m?"Disable FAQ":"Enable FAQ"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx(i,{htmlFor:`support.faqs.${r}.answer`,className:"text-sm font-semibold",children:"Answer"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.answer?.length||0," characters"]})]}),e.jsx("textarea",{id:`support.faqs.${r}.answer`,value:s.answer,onChange:n=>p(r,"answer",n.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100",rows:a?6:3,placeholder:"Go to Connections and follow the setup wizard."}),c?.[`support.faqs.${r}.answer`]&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c[`support.faqs.${r}.answer`]}),e.jsx("button",{type:"button",onClick:()=>O(r),className:"mt-1 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:a?"Show less":"Show more"})]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:`support.faqs.${r}.category`,className:"text-sm font-semibold",children:"Category"}),e.jsx(g,{id:`support.faqs.${r}.category`,type:"text",value:s.category||"",onChange:n=>p(r,"category",n.target.value),className:"mt-1 block w-full",placeholder:"e.g., Getting Started, Billing, Technical"})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold mb-1 block",children:"Tags"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[(s.tags||[]).map((n,x)=>e.jsxs(q,{variant:"outline",className:"flex items-center gap-1",children:[n,e.jsx("button",{type:"button",onClick:()=>z(r,x),className:"ml-1 hover:text-red-600",children:"Ã—"})]},x)),e.jsx("input",{type:"text",placeholder:"Add tag...",className:"text-xs border-0 bg-transparent focus:outline-none focus:ring-0 p-0",onKeyDown:n=>{if(n.key==="Enter"){n.preventDefault();const x=n.target;x.value.trim()&&(W(r,x.value),x.value="")}}})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs(y,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(r),className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),"Duplicate"]}),e.jsxs(y,{type:"button",variant:"secondary",size:"sm",onClick:()=>H(r),className:"flex items-center gap-1 text-red-600 hover:text-red-700",children:[e.jsx(V,{className:"h-3 w-3"}),"Delete"]})]})]})]})})},r)})})]})]}),e.jsxs(v,{className:"border-0 shadow-lg",children:[e.jsxs(w,{className:"bg-gradient-to-r from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20",children:[e.jsx(k,{className:"text-xl font-bold",children:"Support Settings"}),e.jsx(C,{children:"Configure support notifications and SLAs"})]}),e.jsxs(_,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Enable or disable all support emails."})]}),e.jsx(h,{checked:o.support?.email_notifications_enabled??!0,onCheckedChange:s=>d("support",{...o.support,email_notifications_enabled:s})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold",children:"Notify Admins"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email platform admins on new tickets and replies."})]}),e.jsx(h,{checked:o.support?.notify_admins??!0,onCheckedChange:s=>d("support",{...o.support,notify_admins:s})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold",children:"Notify Customers"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email tenants when agents reply."})]}),e.jsx(h,{checked:o.support?.notify_customers??!0,onCheckedChange:s=>d("support",{...o.support,notify_customers:s})})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"support.sla_hours",children:"SLA Hours"}),e.jsx(g,{id:"support.sla_hours",type:"number",min:"1",value:o.support?.sla_hours??48,onChange:s=>d("support",{...o.support,sla_hours:Number(s.target.value)}),className:"mt-1 block w-full"}),c?.["support.sla_hours"]&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c["support.sla_hours"]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"support.first_response_hours",children:"First Response SLA (hours)"}),e.jsx(g,{id:"support.first_response_hours",type:"number",min:"1",value:o.support?.first_response_hours??4,onChange:s=>d("support",{...o.support,first_response_hours:Number(s.target.value)}),className:"mt-1 block w-full"}),c?.["support.first_response_hours"]&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c["support.first_response_hours"]})]})]})]})]})]})}export{le as default};
