import{j as e}from"./react-B_HteL0F.js";import{G as B,H as F,l as D,N as T,a6 as h,a8 as E,Z as u,a0 as j}from"./vendor-GYTC5Pip.js";import{A as P}from"./AppShell-HrBHfcoG.js";import{C as y,a as b,b as f,d as N,c as v}from"./Card-CUbeq4wI.js";import{B as k}from"./Topbar-CPirX8py.js";import{B as o}from"./app-C0WBMkkY.js";import{T as H}from"./TextInput-79R2a16S.js";import{I as i}from"./InputLabel-BB8AVwyX.js";import{I as c}from"./InputError-BqFzjx5L.js";import{u as I}from"./useToast-Rch7lQVh.js";import{C as w}from"./Checkbox-D6HHuBfk.js";import"./GlobalFlashHandler-DpywDQft.js";import"./BrandingWrapper-DIBfDp2T.js";/* empty css            */function Q({workspace:m,bot:a,connections:p}){const{toast:x}=I(),{data:r,setData:t,patch:_,processing:g,errors:n}=B({name:a.name,description:a.description||"",status:a.status,applies_to:a.applies_to}),C=s=>{s.preventDefault(),_(route("app.chatbots.update",{workspace:m.slug,bot:a.id}),{onSuccess:()=>{x.success("Bot updated successfully")},onError:()=>{x.error("Failed to update bot")}})},A=s=>{const d={active:{variant:"success",label:"Active"},paused:{variant:"warning",label:"Paused"},draft:{variant:"default",label:"Draft"}}[s]||{variant:"default",label:s};return e.jsx(k,{variant:d.variant,className:"px-3 py-1",children:d.label})},S=s=>{const l=r.applies_to.connection_ids||[];l.includes(s)?t("applies_to",{...r.applies_to,connection_ids:l.filter(d=>d!==s)}):t("applies_to",{...r.applies_to,connection_ids:[...l,s]})};return e.jsxs(P,{children:[e.jsx(F,{title:`${a.name} - Chatbot`}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs(D,{href:route("app.chatbots.index",{workspace:m.slug}),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-4",children:[e.jsx(T,{className:"h-4 w-4"}),"Back to Chatbots"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent flex items-center gap-3 mb-2",children:[e.jsx(h,{className:"h-8 w-8 text-purple-600 dark:text-purple-400"}),a.name]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.description||"No description"})]}),A(a.status)]})]}),e.jsx("form",{onSubmit:C,className:"space-y-6",children:e.jsxs(y,{className:"border-0 shadow-lg",children:[e.jsx(b,{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-xl",children:e.jsx(h,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx(f,{className:"text-xl font-bold",children:"Bot Settings"}),e.jsx(N,{children:"Update your chatbot configuration"})]})]})}),e.jsxs(v,{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",value:"Bot Name",className:"text-sm font-semibold mb-2"}),e.jsx(H,{id:"name",type:"text",value:r.name,onChange:s=>t("name",s.target.value),className:"mt-1 rounded-xl",required:!0}),e.jsx(c,{message:n.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"description",value:"Description",className:"text-sm font-semibold mb-2"}),e.jsx("textarea",{id:"description",value:r.description,onChange:s=>t("description",s.target.value),className:"mt-1 w-full rounded-xl border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 dark:bg-gray-800 dark:border-gray-700 px-4 py-2.5",rows:3,placeholder:"Describe what this bot does..."}),e.jsx(c,{message:n.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"status",value:"Status",className:"text-sm font-semibold mb-2"}),e.jsxs("select",{id:"status",value:r.status,onChange:s=>t("status",s.target.value),className:"mt-1 w-full rounded-xl border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 dark:bg-gray-800 dark:border-gray-700 px-4 py-2.5",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"})]}),e.jsx(c,{message:n.status,className:"mt-2"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(i,{value:"Applies To",className:"text-sm font-semibold mb-3"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx(w,{checked:r.applies_to.all_connections,onChange:s=>t("applies_to",{...r.applies_to,all_connections:s.target.checked})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"All connections"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Apply this bot to all WhatsApp connections"})]})]})}),!r.applies_to.all_connections&&e.jsx("div",{className:"space-y-2",children:p.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:"No connections available"}):p.map(s=>e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 cursor-pointer transition-colors",children:[e.jsx(w,{checked:r.applies_to.connection_ids?.includes(s.id),onChange:()=>S(s.id)}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.name})]},s.id))})]})]}),e.jsx("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(o,{type:"submit",disabled:g,className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 shadow-lg shadow-purple-500/50 rounded-xl",children:g?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})})]})]})}),e.jsxs(y,{className:"border-0 shadow-lg",children:[e.jsx(b,{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl",children:e.jsx(u,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx(f,{className:"text-xl font-bold",children:"Flows"}),e.jsx(N,{children:"Define when and how the bot responds"})]})]}),e.jsxs(o,{variant:"secondary",size:"sm",className:"rounded-xl",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Flow"]})]})}),e.jsx(v,{className:"p-6",children:a.flows.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 mb-4",children:e.jsx(u,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No flows yet"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Add a flow to define when and how the bot responds to messages."}),e.jsxs(o,{variant:"secondary",className:"rounded-xl",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Your First Flow"]})]}):e.jsx("div",{className:"space-y-3",children:a.flows.map(s=>e.jsx("div",{className:"p-5 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s.name}),e.jsx(k,{variant:s.enabled?"success":"default",className:"px-2 py-1 text-xs",children:s.enabled?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Trigger: ",s.trigger.type]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Priority: ",s.priority]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Nodes: ",s.nodes.length]})]})]}),e.jsx(o,{variant:"secondary",size:"sm",className:"rounded-xl",children:"Edit"})]})},s.id))})})]})]})]})}export{Q as default};
