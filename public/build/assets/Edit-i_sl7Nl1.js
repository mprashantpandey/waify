import{j as e}from"./react-BhzSerM2.js";import{G as F,H as O,l as u,N as B,a7 as D,a0 as g,B as f,C as z}from"./vendor-DxGhd0kb.js";import{A as E}from"./AppShell-Cc2RD8Vl.js";import{C as w,b as v,c as N,d as y,a as b}from"./Card-W2rT1n1C.js";import{B as x}from"./app-Iwsu59co.js";import{T as h}from"./TextInput-DRXLElIV.js";import{L as d}from"./Label-CDtPAWys.js";import{S as U,a as H,b as V,c as q,d as G}from"./Select-CT3Xdv2Q.js";import{T as P}from"./Textarea-B-2hwyIh.js";import{A as _}from"./Alert-CNardO3g.js";import{u as W}from"./useToast-m6H8bvjE.js";import"./Topbar-DdwsMJGZ.js";import"./Badge-i1wYvjg_.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./BrandingWrapper-DK418oSm.js";import"./CookieConsentBanner-CkGeiZeY.js";/* empty css            */function xe({account:J,list:o,connections:C}){const{toast:m}=W(),{data:i,setData:n,put:k,processing:j,errors:a}=F({whatsapp_connection_id:o.whatsapp_connection_id.toString(),name:o.name,button_text:o.button_text,description:o.description||"",footer_text:o.footer_text||"",sections:o.sections}),S=t=>{t.preventDefault(),k(route("app.whatsapp.lists.update",{list:o.id}),{onSuccess:()=>{m.success("List updated successfully")},onError:s=>{m.error("Failed to update list",Object.values(s).flat().join(", "))}})},M=()=>{if(i.sections.length>=10){m.error("Maximum 10 sections allowed");return}n("sections",[...i.sections,{title:"",rows:[{id:"",title:"",description:""}]}])},L=t=>{const s=[...i.sections];s.splice(t,1),n("sections",s)},R=(t,s,c)=>{const r=[...i.sections];r[t]={...r[t],[s]:c},n("sections",r)},$=t=>{const s=[...i.sections];if(s[t].rows.length>=10){m.error("Maximum 10 rows per section allowed");return}if(s.reduce((r,l)=>r+l.rows.length,0)>=10){m.error("Maximum 10 total rows across all sections");return}s[t].rows.push({id:"",title:"",description:""}),n("sections",s)},T=(t,s)=>{const c=[...i.sections];c[t].rows.splice(s,1),c[t].rows.length===0&&c[t].rows.push({id:"",title:"",description:""}),n("sections",c)},p=(t,s,c,r)=>{const l=[...i.sections];l[t].rows[s]={...l[t].rows[s],[c]:r},n("sections",l)},A=i.sections.reduce((t,s)=>t+s.rows.length,0);return e.jsxs(E,{children:[e.jsx(O,{title:`Edit List: ${o.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{href:route("app.whatsapp.lists.show",{list:o.id}),children:e.jsxs(x,{variant:"ghost",size:"sm",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Back"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Edit List"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Update your interactive list message"})]})]}),e.jsxs(_,{variant:"info",className:"mb-6",children:[e.jsx(D,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"List Message Guidelines"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Button text: Max 20 characters"}),e.jsx("li",{children:"Description: Max 1024 characters (optional)"}),e.jsx("li",{children:"Footer: Max 60 characters (optional)"}),e.jsx("li",{children:"Max 10 sections, each with max 10 rows"}),e.jsx("li",{children:"Total rows across all sections: Max 10"}),e.jsx("li",{children:"Section title: Max 24 characters"}),e.jsx("li",{children:"Row ID: Max 200 characters (unique identifier)"}),e.jsx("li",{children:"Row title: Max 24 characters"}),e.jsx("li",{children:"Row description: Max 72 characters (optional)"})]})]})]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs(w,{children:[e.jsxs(v,{children:[e.jsx(N,{children:"Basic Information"}),e.jsx(y,{children:"Configure the list name and connection"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"connection",children:"WhatsApp Connection *"}),e.jsxs(U,{value:i.whatsapp_connection_id,onValueChange:t=>n("whatsapp_connection_id",t),children:[e.jsx(H,{children:e.jsx(V,{placeholder:"Select connection"})}),e.jsx(q,{children:C.map(t=>e.jsx(G,{value:t.id.toString(),children:t.name},t.id))})]}),a.whatsapp_connection_id&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a.whatsapp_connection_id})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",children:"List Name *"}),e.jsx(h,{id:"name",value:i.name,onChange:t=>n("name",t.target.value),placeholder:"e.g., Product Catalog, Support Options",maxLength:255}),a.name&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a.name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"button_text",children:"Button Text * (Max 20 chars)"}),e.jsx(h,{id:"button_text",value:i.button_text,onChange:t=>n("button_text",t.target.value),placeholder:"e.g., View Options, Browse",maxLength:20}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[i.button_text.length,"/20 characters"]}),a.button_text&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a.button_text})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"description",children:"Description (Optional, Max 1024 chars)"}),e.jsx(P,{id:"description",value:i.description||"",onChange:t=>n("description",t.target.value),placeholder:"Optional description text",maxLength:1024,rows:3}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(i.description||"").length,"/1024 characters"]}),a.description&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a.description})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"footer_text",children:"Footer Text (Optional, Max 60 chars)"}),e.jsx(h,{id:"footer_text",value:i.footer_text||"",onChange:t=>n("footer_text",t.target.value),placeholder:"Optional footer text",maxLength:60}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(i.footer_text||"").length,"/60 characters"]}),a.footer_text&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a.footer_text})]})]})]}),e.jsxs(w,{children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Sections & Rows"}),e.jsxs(y,{children:["Configure list sections and rows (",i.sections.length," sections, ",A," ","rows)"]})]}),e.jsxs(x,{type:"button",onClick:M,variant:"secondary",size:"sm",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Add Section"]})]})}),e.jsxs(b,{className:"space-y-6",children:[i.sections.map((t,s)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:["Section ",s+1]}),i.sections.length>1&&e.jsx(x,{type:"button",onClick:()=>L(s),variant:"ghost",size:"sm",children:e.jsx(f,{className:"h-4 w-4 text-red-500"})})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Section Title * (Max 24 chars)"}),e.jsx(h,{value:t.title,onChange:c=>R(s,"title",c.target.value),placeholder:"Section title",maxLength:24}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[t.title.length,"/24 characters"]}),a[`sections.${s}.title`]&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:a[`sections.${s}.title`]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(d,{children:["Rows (",t.rows.length,"/10)"]}),e.jsxs(x,{type:"button",onClick:()=>$(s),variant:"secondary",size:"sm",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Add Row"]})]}),t.rows.map((c,r)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["Row ",r+1]}),t.rows.length>1&&e.jsx(x,{type:"button",onClick:()=>T(s,r),variant:"ghost",size:"sm",children:e.jsx(f,{className:"h-3 w-3 text-red-500"})})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-xs",children:"Row ID * (Max 200 chars)"}),e.jsx(h,{value:c.id,onChange:l=>p(s,r,"id",l.target.value),placeholder:"Unique identifier (e.g., product_1)",maxLength:200,className:"text-sm"}),a[`sections.${s}.rows.${r}.id`]&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:a[`sections.${s}.rows.${r}.id`]})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-xs",children:"Row Title * (Max 24 chars)"}),e.jsx(h,{value:c.title,onChange:l=>p(s,r,"title",l.target.value),placeholder:"Row title",maxLength:24,className:"text-sm"}),a[`sections.${s}.rows.${r}.title`]&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:a[`sections.${s}.rows.${r}.title`]})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-xs",children:"Row Description (Optional, Max 72 chars)"}),e.jsx(h,{value:c.description||"",onChange:l=>p(s,r,"description",l.target.value),placeholder:"Optional description",maxLength:72,className:"text-sm"}),a[`sections.${s}.rows.${r}.description`]&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:a[`sections.${s}.rows.${r}.description`]})]})]},r))]})]},s)),a.sections&&e.jsxs(_,{variant:"error",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsx("div",{children:Array.isArray(a.sections)?e.jsx("ul",{className:"list-disc list-inside",children:a.sections.map((t,s)=>e.jsx("li",{children:t},s))}):e.jsx("p",{children:a.sections})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(u,{href:route("app.whatsapp.lists.show",{list:o.id}),children:e.jsx(x,{type:"button",variant:"secondary",children:"Cancel"})}),e.jsx(x,{type:"submit",disabled:j,children:j?"Updating...":"Update List"})]})]})]})]})}export{xe as default};
