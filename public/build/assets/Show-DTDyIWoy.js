import{r as p,j as e}from"./react-BhzSerM2.js";import{u as S,H as V,q as j,V as G,aq as D,M as A,k as F,e as J,l as _,N as K}from"./vendor-YQoUUhbX.js";import{A as Q}from"./AppShell-A6sQ3pxr.js";import{C as o,b as T,c as B,a as d}from"./Card-CRSrZ5HZ.js";import{B as v}from"./Badge-C6d-QEGL.js";import{B as c}from"./app-DjsbE74r.js";import{T as m}from"./TextInput-DRXLElIV.js";import{I as l}from"./InputLabel-qVeuR0hO.js";import"./Topbar-D6SeU-QE.js";import"./GlobalFlashHandler-DjMhmIiM.js";import"./useToast-C37H2DkG.js";import"./BrandingWrapper-Djq-D_tN.js";import"./Alert-u60ICsin.js";import"./CookieConsentBanner-C37xsP7H.js";/* empty css            */function me({account:W,contact:x,activities:I=[],tags:b=[],segments:y=[]}){const t={...x,tags:x?.tags??[],segments:x?.segments??[]},f=Array.isArray(b)?b:[],[L,h]=p.useState(!1),[N,k]=p.useState(!1),[C,w]=p.useState(!1),{data:M,setData:g,post:q,processing:H}=S({note:""}),{data:s,setData:r,put:O,processing:E}=S({name:t.name||"",email:t.email||"",phone:t.phone||"",company:t.company||"",notes:t.notes||"",status:t.status,tags:(t.tags||[]).map(a=>a.id),segments:(t.segments||[]).map(a=>a.id)}),$=a=>{a.preventDefault(),O(route("app.contacts.update",{contact:t.slug||t.id}))},z=a=>{a.preventDefault(),q(route("app.contacts.add-note",{contact:t.slug||t.id}),{onSuccess:()=>{h(!1),g("note","")}})},U=()=>{confirm(`Delete contact "${t.name||t.wa_id}"? This action cannot be undone.`)&&(w(!0),F.delete(route("app.contacts.destroy",{contact:t.slug||t.id}),{onFinish:()=>{w(!1)}}))},R=a=>{const i={active:{variant:"success",label:"Active"},inactive:{variant:"default",label:"Inactive"},blocked:{variant:"danger",label:"Blocked"},opt_out:{variant:"warning",label:"Opt Out"}}[a]||{variant:"default",label:a};return e.jsx(v,{variant:i.variant,children:i.label})},u=a=>a?new Date(a).toLocaleString():"â€”";return e.jsxs(Q,{children:[e.jsx(V,{title:t.name||t.wa_id}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(j,{href:route("app.contacts.index",{}),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-4",children:[e.jsx(G,{className:"h-4 w-4"}),"Back to Contacts"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:t.name||t.wa_id}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[R(t.status),(t.tags||[]).map(a=>e.jsx(v,{variant:"default",style:{backgroundColor:a.color+"20",color:a.color},children:a.name},a.id)),(t.segments||[]).length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Segments:"}),(t.segments||[]).map(a=>e.jsx(v,{variant:"secondary",children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{className:"bg-[#25D366] hover:bg-[#1DAA57] text-white",disabled:N,onClick:()=>{k(!0),F.visit(route("app.whatsapp.conversations.by-contact",{contact:t.slug||t.id}),{onFinish:()=>k(!1)})},"aria-label":"Start conversation in Inbox",children:[N?e.jsx(D,{className:"h-4 w-4 mr-2 animate-spin","aria-hidden":!0}):e.jsx(A,{className:"h-4 w-4 mr-2","aria-hidden":!0}),"Start conversation"]}),e.jsxs(c,{variant:"danger",disabled:C,onClick:U,"aria-label":"Delete contact",children:[C?e.jsx(D,{className:"h-4 w-4 mr-2 animate-spin","aria-hidden":!0}):e.jsx(J,{className:"h-4 w-4 mr-2","aria-hidden":!0}),"Delete"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(o,{children:[e.jsx(T,{children:e.jsx(B,{children:"Contact Details"})}),e.jsx(d,{children:e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",value:"Name"}),e.jsx(m,{id:"name",type:"text",value:s.name,onChange:a=>r("name",a.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",value:"Email"}),e.jsx(m,{id:"email",type:"email",value:s.email,onChange:a=>r("email",a.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",value:"Phone"}),e.jsx(m,{id:"phone",type:"text",value:s.phone,onChange:a=>r("phone",a.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"company",value:"Company"}),e.jsx(m,{id:"company",type:"text",value:s.company,onChange:a=>r("company",a.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"status",value:"Status"}),e.jsxs("select",{id:"status",value:s.status,onChange:a=>r("status",a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"blocked",children:"Blocked"}),e.jsx("option",{value:"opt_out",children:"Opt Out"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"notes",value:"Notes"}),e.jsx("textarea",{id:"notes",value:s.notes,onChange:a=>r("notes",a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",rows:4})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Tags"}),f.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 mb-2",children:"Add or remove tags for this contact"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(a=>e.jsx("button",{type:"button",onClick:()=>{const n=s.tags;r("tags",n.includes(a.id)?n.filter(i=>i!==a.id):[...n,a.id])},className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors border ${s.tags.includes(a.id)?"border-blue-500 bg-blue-600 text-white":"border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,style:s.tags.includes(a.id)?void 0:{borderColor:a.color+"80",backgroundColor:a.color+"20",color:a.color},children:a.name},a.id))})]}):e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["No tags yet."," ",e.jsx(j,{href:route("app.contacts.tags.index"),className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400",children:"Create tags in the Tags section"})]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Segments"}),y.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 mb-2",children:"Add or remove segments for this contact"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(a=>e.jsx("button",{type:"button",onClick:()=>{const n=s.segments;r("segments",n.includes(a.id)?n.filter(i=>i!==a.id):[...n,a.id])},className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors border ${s.segments.includes(a.id)?"border-emerald-500 bg-emerald-600 text-white":"border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:a.name},a.id))})]}):e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["No segments yet."," ",e.jsx(j,{href:route("app.contacts.segments.index"),className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400",children:"Create segments in the Segments section"})]})]}),e.jsx(c,{type:"submit",disabled:E,children:"Save Changes"})]})})]}),e.jsxs(o,{children:[e.jsx(T,{children:e.jsx(B,{children:"Activity History"})}),e.jsxs(d,{children:[L?e.jsxs("form",{onSubmit:z,className:"mb-4 space-y-2",children:[e.jsx(m,{value:M.note,onChange:a=>g("note",a.target.value),placeholder:"Add a note...",required:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{type:"submit",disabled:H,size:"sm",children:"Save"}),e.jsx(c,{type:"button",variant:"secondary",size:"sm",onClick:()=>{h(!1),g("note","")},children:"Cancel"})]})]}):e.jsx(c,{onClick:()=>h(!0),variant:"secondary",className:"mb-4 w-full",children:"Add Note"}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:I.map(a=>e.jsx("div",{className:"border-l-2 border-gray-200 dark:border-gray-700 pl-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.title}),a.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a.description}),a.user&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["by ",a.user.name]})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:u(a.created_at)})]})},a.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(o,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Messages"}),e.jsx("p",{className:"text-lg font-bold",children:t.message_count})]})]})})}),e.jsx(o,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Seen"}),e.jsx("p",{className:"text-sm font-medium",children:u(t.last_seen_at)})]})]})})}),e.jsx(o,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Source"}),e.jsx("p",{className:"text-sm font-medium",children:t.source||"Manual"})]})]})})}),e.jsx(o,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"text-sm font-medium",children:u(t.created_at)})]})]})})})]})]})]})}export{me as default};
