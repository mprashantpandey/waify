import{r as b,j as e}from"./react-BhzSerM2.js";import{u as I,G as L,i as O,az as U,ap as V,ax as W,D as H,W as Z,aE as X,a2 as Y,aF as q,Z as J,s as K,a6 as Q,aG as _,w as $,aH as ee,a8 as ae}from"./vendor-DxGhd0kb.js";import{P as re}from"./PlatformShell-DffYmFA1.js";import{B as se}from"./app-LxBsIpMW.js";import{u as te,T as ie,a as ne,b as oe,c as t}from"./Tabs-BeuSLJPN.js";import{M as le}from"./MisconfiguredSettingsAlert-CfrODmJE.js";import{u as ce}from"./useToast-m6H8bvjE.js";import{u as me}from"./useNotifications-Dq4PYoVb.js";import de from"./GeneralTab-JP3UZ1If.js";import pe from"./SecurityTab-CkzFcHoZ.js";import ue from"./PaymentTab-BuX5rwQK.js";import fe from"./IntegrationsTab-BBIcnfIh.js";import xe from"./AnalyticsTab-BnTalEkG.js";import be from"./ComplianceTab-pQ7cFMl0.js";import ge from"./PerformanceTab-Cp0uS8Bw.js";import he from"./FeaturesTab-DJVHi5U5.js";import je from"./PusherTab-B4n4rUkD.js";import ye from"./MailTab-CqkS2FxK.js";import ve from"./StorageTab-DJxJJjpl.js";import Se from"./BrandingTab-IwM5ENoO.js";import Te from"./AiTab-BOT0Xfax.js";import we from"./SupportTab-BcS-RInN.js";import"./Topbar-C479R05n.js";import"./Badge-DpSbAfCU.js";import"./BrandingWrapper-DK418oSm.js";import"./GlobalFlashHandler-xHP6pVTU.js";/* empty css            */import"./Alert-u745Uvig.js";import"./Card-2LWG2Pxg.js";import"./TextInput-DRXLElIV.js";import"./InputLabel-qVeuR0hO.js";import"./InputError-6mWSc7R2.js";import"./Input-BtY1XEUX.js";import"./Label-Ceizej24.js";import"./Switch-D3uoDSSm.js";function na({pusher:g,mail:h,storage:j,general:y,security:v,payment:p,integrations:S,analytics:T,compliance:w,performance:P,features:N,branding:k,ai:A,whatsapp:C,support:E,misconfigured_settings:c}){const{auth:F,flash:o}=I().props,B=()=>typeof window<"u"&&new URLSearchParams(window.location.search).get("tab")||"general",{value:m,setValue:d}=te(B());b.useEffect(()=>{if(typeof window<"u"){const i=new URLSearchParams(window.location.search).get("tab");i&&i!==m&&d(i)}},[m,d]);const{addToast:l}=ce(),{confirm:D}=me(),{data:r,setData:s,post:M,processing:u,errors:a}=L({general:y||{},security:v||{},payment:p||{},integrations:S||{},analytics:T||{},compliance:w||{},performance:P||{},features:N||{},pusher:g||{},mail:h||{},storage:j||{},branding:k||{},ai:A||{},whatsapp:C||{},support:E||{}});b.useEffect(()=>{o?.success&&l({title:"Success",description:o.success,variant:"success"}),o?.error&&l({title:"Error",description:o.error,variant:"error"}),o?.warning&&l({title:"Warning",description:o.warning,variant:"warning"})},[o,l]);const R=async n=>{n.preventDefault();const i=p||{},G=r.payment||{};i.razorpay_enabled&&!G.razorpay_enabled&&!await D({title:"Disable Razorpay?",message:"You are about to disable Razorpay. This will prevent users from making payments. Are you sure?",variant:"warning"})||M(route("platform.settings.update"),{preserveScroll:!1,forceFormData:!0,only:["general","security","payment","integrations","analytics","compliance","performance","features","pusher","mail","storage","branding","ai","whatsapp","support","flash"],onSuccess:()=>{l({title:"Settings Saved",description:"All settings have been updated successfully.",variant:"success"})},onError:f=>{const x=Object.values(f).flat();l({title:"Error Saving Settings",description:x.length>0?x[0]:"Failed to save settings. Please try again.",variant:"error"})}})},z=[{id:"general",label:"General",icon:U},{id:"support",label:"Support",icon:V},{id:"branding",label:"Branding",icon:W},{id:"security",label:"Security",icon:H},{id:"payment",label:"Payment",icon:Z},{id:"integrations",label:"Integrations",icon:X},{id:"analytics",label:"Analytics",icon:Y},{id:"compliance",label:"Compliance",icon:q},{id:"performance",label:"Performance",icon:J},{id:"features",label:"Features",icon:K},{id:"ai",label:"AI",icon:Q},{id:"pusher",label:"Pusher",icon:_},{id:"mail",label:"Mail",icon:$},{id:"storage",label:"Storage",icon:ee}];return e.jsx(re,{auth:F,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Platform Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Configure all platform-wide settings and integrations"})]}),c&&c.length>0&&e.jsx(le,{misconfiguredSettings:c,variant:"settings"}),Object.keys(a).length>0&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(O,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-1",children:"Validation Errors"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 dark:text-red-300 space-y-1",children:Object.entries(a).map(([n,i])=>e.jsx("li",{children:Array.isArray(i)?i.join(", "):i},n))})]})]})}),e.jsxs(ie,{value:m,onValueChange:d,children:[e.jsx(ne,{className:"w-full justify-start mb-6 overflow-x-auto",children:z.map(n=>{const i=n.icon;return e.jsxs(oe,{value:n.id,children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),n.label]},n.id)})}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsx(t,{value:"general",children:e.jsx(de,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"support",children:e.jsx(we,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"branding",children:e.jsx(Se,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"security",children:e.jsx(pe,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"payment",children:e.jsx(ue,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"integrations",children:e.jsx(fe,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"analytics",children:e.jsx(xe,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"compliance",children:e.jsx(be,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"performance",children:e.jsx(ge,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"features",children:e.jsx(he,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"pusher",children:e.jsx(je,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"ai",children:e.jsx(Te,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"mail",children:e.jsx(ye,{data:r,setData:s,errors:a})}),e.jsx(t,{value:"storage",children:e.jsx(ve,{data:r,setData:s,errors:a})}),e.jsx("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-800",children:e.jsxs(se,{type:"submit",disabled:u,children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),u?"Saving...":"Save All Settings"]})})]})]})]})})}export{na as default};
