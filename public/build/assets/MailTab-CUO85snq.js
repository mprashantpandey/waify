import{r as n,j as e}from"./react-BhzSerM2.js";import{C as h,b as v,c as j,a as f}from"./Card-CRSrZ5HZ.js";import{T as t}from"./TextInput-DRXLElIV.js";import{I as l}from"./InputLabel-qVeuR0hO.js";import{I as i}from"./InputError-6mWSc7R2.js";import{B as y}from"./app-DjsbE74r.js";import{D as b,aL as w,a5 as N,k as _}from"./vendor-YQoUUhbX.js";/* empty css            */function M({data:s,setData:m,errors:r}){const[d,x]=n.useState(!1),[o,c]=n.useState(""),[u,p]=n.useState(!1);n.useEffect(()=>{!o&&s.mail?.from_address&&c(s.mail.from_address)},[s.mail?.from_address,o]);const g=()=>{p(!0),_.post(route("platform.settings.mail.test"),{test_email:o,mail:{driver:s.mail?.driver||"smtp",host:s.mail?.host||"",port:s.mail?.port||587,username:s.mail?.username||"",password:s.mail?.password||"",encryption:s.mail?.encryption||"tls",from_address:s.mail?.from_address||"",from_name:s.mail?.from_name||""}},{preserveState:!0,preserveScroll:!0,onFinish:()=>p(!1)})};return e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Mail Configuration"]})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mail.driver",value:"Driver"}),e.jsxs("select",{id:"mail.driver",value:s.mail?.driver||"smtp",onChange:a=>m("mail.driver",a.target.value),className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 dark:focus:border-indigo-500 dark:focus:ring-indigo-500",children:[e.jsx("option",{value:"smtp",children:"SMTP"}),e.jsx("option",{value:"sendmail",children:"Sendmail"}),e.jsx("option",{value:"mailgun",children:"Mailgun"}),e.jsx("option",{value:"ses",children:"Amazon SES"}),e.jsx("option",{value:"postmark",children:"Postmark"}),e.jsx("option",{value:"log",children:"Log"})]}),e.jsx(i,{message:r["mail.driver"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mail.host",value:"Host"}),e.jsx(t,{id:"mail.host",type:"text",value:s.mail?.host||"",onChange:a=>m("mail.host",a.target.value),className:"mt-1",placeholder:"smtp.mailtrap.io"}),e.jsx(i,{message:r["mail.host"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mail.port",value:"Port"}),e.jsx(t,{id:"mail.port",type:"number",value:s.mail?.port||587,onChange:a=>m("mail.port",parseInt(a.target.value)||587),className:"mt-1"}),e.jsx(i,{message:r["mail.port"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mail.encryption",value:"Encryption"}),e.jsxs("select",{id:"mail.encryption",value:s.mail?.encryption||"tls",onChange:a=>m("mail.encryption",a.target.value),className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 dark:focus:border-indigo-500 dark:focus:ring-indigo-500",children:[e.jsx("option",{value:"tls",children:"TLS"}),e.jsx("option",{value:"ssl",children:"SSL"})]}),e.jsx(i,{message:r["mail.encryption"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mail.username",value:"Username"}),e.jsx(t,{id:"mail.username",type:"text",value:s.mail?.username||"",onChange:a=>m("mail.username",a.target.value),className:"mt-1"}),e.jsx(i,{message:r["mail.username"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mail.password",value:"Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(t,{id:"mail.password",type:d?"text":"password",value:s.mail?.password||"",onChange:a=>m("mail.password",a.target.value),className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>x(!d),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:d?e.jsx(w,{className:"h-4 w-4"}):e.jsx(N,{className:"h-4 w-4"})})]}),e.jsx(i,{message:r["mail.password"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mail.from_address",value:"From Address"}),e.jsx(t,{id:"mail.from_address",type:"email",value:s.mail?.from_address||"",onChange:a=>m("mail.from_address",a.target.value),className:"mt-1",placeholder:"noreply@example.com"}),e.jsx(i,{message:r["mail.from_address"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mail.from_name",value:"From Name"}),e.jsx(t,{id:"mail.from_name",type:"text",value:s.mail?.from_name||"",onChange:a=>m("mail.from_name",a.target.value),className:"mt-1",placeholder:"WACP Platform"}),e.jsx(i,{message:r["mail.from_name"]})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-[1fr_auto]",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mail.test_email",value:"Test Recipient"}),e.jsx(t,{id:"mail.test_email",type:"email",value:o,onChange:a=>c(a.target.value),className:"mt-1",placeholder:"admin@example.com"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Sends a diagnostics email with current unsaved values. If SMTP fails, fallback writes to `log` mailer and raises an alert in Delivery tab."})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(y,{type:"button",variant:"secondary",disabled:u||!o,onClick:g,children:u?"Sending...":"Send Test Email"})})]}),e.jsx(i,{message:r.test_email})]})]})]})}export{M as default};
