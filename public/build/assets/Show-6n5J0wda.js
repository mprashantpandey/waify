import{r as B,j as e}from"./react-B_HteL0F.js";import{G as g,H as E,l as M,N as I,M as L,C as j,E as H}from"./vendor-GYTC5Pip.js";import{A as O}from"./AppShell-HrBHfcoG.js";import{C as l,a as v,b as f,c as n}from"./Card-CUbeq4wI.js";import{B as N}from"./Topbar-CPirX8py.js";import{B as c}from"./app-C0WBMkkY.js";import{u as T}from"./useToast-Rch7lQVh.js";import{T as o}from"./TextInput-79R2a16S.js";import{I as d}from"./InputLabel-BB8AVwyX.js";import"./GlobalFlashHandler-DpywDQft.js";import"./BrandingWrapper-DIBfDp2T.js";/* empty css            */function $({workspace:m,contact:a,activities:y,tags:q}){const{toast:i}=T(),[b,x]=B.useState(!1),{data:k,setData:u,post:w,processing:C}=g({note:""}),{data:t,setData:r,put:S,processing:D}=g({name:a.name||"",email:a.email||"",phone:a.phone||"",company:a.company||"",notes:a.notes||"",status:a.status,tags:a.tags.map(s=>s.id)}),F=s=>{s.preventDefault(),S(route("app.contacts.update",{workspace:m.slug,contact:a.slug}),{onSuccess:()=>{i.success("Contact updated")},onError:()=>{i.error("Failed to update contact")}})},_=s=>{s.preventDefault(),w(route("app.contacts.add-note",{workspace:m.slug,contact:a.slug}),{onSuccess:()=>{i.success("Note added"),x(!1),u("note","")},onError:()=>{i.error("Failed to add note")}})},A=s=>{const p={active:{variant:"success",label:"Active"},inactive:{variant:"default",label:"Inactive"},blocked:{variant:"danger",label:"Blocked"},opt_out:{variant:"warning",label:"Opt Out"}}[s]||{variant:"default",label:s};return e.jsx(N,{variant:p.variant,children:p.label})},h=s=>s?new Date(s).toLocaleString():"â€”";return e.jsxs(O,{children:[e.jsx(E,{title:a.name||a.wa_id}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(M,{href:route("app.contacts.index",{workspace:m.slug}),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-4",children:[e.jsx(I,{className:"h-4 w-4"}),"Back to Contacts"]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:a.name||a.wa_id}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[A(a.status),a.tags.map(s=>e.jsx(N,{variant:"default",style:{backgroundColor:s.color+"20",color:s.color},children:s.name},s.id))]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(v,{children:e.jsx(f,{children:"Contact Details"})}),e.jsx(n,{children:e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",value:"Name"}),e.jsx(o,{id:"name",type:"text",value:t.name,onChange:s=>r("name",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email",value:"Email"}),e.jsx(o,{id:"email",type:"email",value:t.email,onChange:s=>r("email",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"phone",value:"Phone"}),e.jsx(o,{id:"phone",type:"text",value:t.phone,onChange:s=>r("phone",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"company",value:"Company"}),e.jsx(o,{id:"company",type:"text",value:t.company,onChange:s=>r("company",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"status",value:"Status"}),e.jsxs("select",{id:"status",value:t.status,onChange:s=>r("status",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"blocked",children:"Blocked"}),e.jsx("option",{value:"opt_out",children:"Opt Out"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"notes",value:"Notes"}),e.jsx("textarea",{id:"notes",value:t.notes,onChange:s=>r("notes",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",rows:4})]}),e.jsx(c,{type:"submit",disabled:D,children:"Save Changes"})]})})]}),e.jsxs(l,{children:[e.jsx(v,{children:e.jsx(f,{children:"Activity History"})}),e.jsxs(n,{children:[b?e.jsxs("form",{onSubmit:_,className:"mb-4 space-y-2",children:[e.jsx(o,{value:k.note,onChange:s=>u("note",s.target.value),placeholder:"Add a note...",required:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{type:"submit",disabled:C,size:"sm",children:"Save"}),e.jsx(c,{type:"button",variant:"secondary",size:"sm",onClick:()=>{x(!1),u("note","")},children:"Cancel"})]})]}):e.jsx(c,{onClick:()=>x(!0),variant:"secondary",className:"mb-4 w-full",children:"Add Note"}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:y.map(s=>e.jsx("div",{className:"border-l-2 border-gray-200 dark:border-gray-700 pl-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:s.description}),s.user&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["by ",s.user.name]})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:h(s.created_at)})]})},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(l,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Messages"}),e.jsx("p",{className:"text-lg font-bold",children:a.message_count})]})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Seen"}),e.jsx("p",{className:"text-sm font-medium",children:h(a.last_seen_at)})]})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Source"}),e.jsx("p",{className:"text-sm font-medium",children:a.source||"Manual"})]})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"text-sm font-medium",children:h(a.created_at)})]})]})})})]})]})]})}export{$ as default};
