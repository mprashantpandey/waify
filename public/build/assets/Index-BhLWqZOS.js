import{r as M,j as e}from"./react-BhzSerM2.js";import{H as S,M as y,F as N,U as _,d as C,e as T}from"./vendor-DxGhd0kb.js";import{A}from"./AppShell-Cc2RD8Vl.js";import{C as l,b as c,c as x,a as r,d as u}from"./Card-W2rT1n1C.js";import{B as m}from"./Badge-i1wYvjg_.js";import"./app-Iwsu59co.js";/* empty css            */import"./Topbar-DdwsMJGZ.js";import"./GlobalFlashHandler-xHP6pVTU.js";import"./useToast-m6H8bvjE.js";import"./BrandingWrapper-DK418oSm.js";import"./Alert-CNardO3g.js";import"./CookieConsentBanner-CkGeiZeY.js";function z({account:$,date_range:v,message_trends:i,message_status_distribution:D,template_performance:h,conversation_stats:j,peak_hours:g,daily_activity:R,usage:a}){const[b,w]=M.useState(v),k=s=>{w(s),T.get(route("app.analytics.index",{}),{range:s},{preserveState:!0,preserveScroll:!0})},d=s=>s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString(),f=(s,t)=>t===-1?0:t===0?100:Math.min(s/t*100,100);return e.jsxs(A,{children:[e.jsx(S,{title:"Analytics"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Analytics"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Insights into your WhatsApp messaging activity"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:b,onChange:s=>k(s.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"7",children:"Last 7 days"}),e.jsx("option",{value:"30",children:"Last 30 days"}),e.jsx("option",{value:"90",children:"Last 90 days"}),e.jsx("option",{value:"365",children:"Last year"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Messages Usage"]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Sent"}),e.jsxs("span",{className:"font-semibold",children:[d(a.messages_sent)," / ",a.messages_limit===-1?"∞":d(a.messages_limit)]})]}),a.messages_limit!==-1&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${f(a.messages_sent,a.messages_limit)}%`}})})]})})]}),e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Template Sends"]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Sent"}),e.jsxs("span",{className:"font-semibold",children:[d(a.template_sends)," / ",a.template_sends_limit===-1?"∞":d(a.template_sends_limit)]})]}),a.template_sends_limit!==-1&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all",style:{width:`${f(a.template_sends,a.template_sends_limit)}%`}})})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(l,{children:e.jsxs(r,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Conversations"}),e.jsx("p",{className:"text-2xl font-bold",children:j.total})]}),e.jsx(_,{className:"h-8 w-8 text-blue-500"})]}),e.jsxs("div",{className:"mt-4 flex gap-2 text-xs",children:[e.jsxs(m,{variant:"success",children:[j.open," Open"]}),e.jsxs(m,{variant:"default",children:[j.closed," Closed"]})]})]})}),e.jsx(l,{children:e.jsxs(r,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Messages"}),e.jsx("p",{className:"text-2xl font-bold",children:d(i.reduce((s,t)=>s+t.total,0))})]}),e.jsx(y,{className:"h-8 w-8 text-green-500"})]}),e.jsxs("div",{className:"mt-4 flex gap-2 text-xs",children:[e.jsxs(m,{variant:"info",children:[d(i.reduce((s,t)=>s+t.inbound,0))," Inbound"]}),e.jsxs(m,{variant:"default",children:[d(i.reduce((s,t)=>s+t.outbound,0))," Outbound"]})]})]})}),e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Daily Messages"}),e.jsx("p",{className:"text-2xl font-bold",children:d(Math.round(i.reduce((s,t)=>s+t.total,0)/Math.max(i.length,1)))})]}),e.jsx(C,{className:"h-8 w-8 text-purple-500"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Top Templates"}),e.jsx("p",{className:"text-2xl font-bold",children:h.length})]}),e.jsx(N,{className:"h-8 w-8 text-orange-500"})]})})})]}),e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(x,{children:"Message Trends"}),e.jsx(u,{children:"Inbound vs Outbound messages over time"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-64 flex items-end justify-between gap-1",children:i.length>0?i.map((s,t)=>{const n=Math.max(...i.map(o=>Math.max(o.inbound,o.outbound,1)));return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsxs("div",{className:"w-full flex flex-col-reverse gap-0.5 h-48",children:[e.jsx("div",{className:"bg-blue-500 rounded-t",style:{height:`${s.outbound/n*100}%`},title:`Outbound: ${s.outbound}`}),e.jsx("div",{className:"bg-green-500 rounded-t",style:{height:`${s.inbound/n*100}%`},title:`Inbound: ${s.inbound}`})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},t)}):e.jsx("div",{className:"w-full text-center text-gray-500 dark:text-gray-400 py-16",children:"No message data available for this period"})})})]}),h.length>0&&e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(x,{children:"Top Performing Templates"}),e.jsx(u,{children:"Template send performance metrics"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:s.template_name}),e.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Sent: ",s.total_sends]}),e.jsxs("span",{children:["Delivered: ",s.delivered]}),e.jsxs("span",{children:["Read: ",s.read]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(m,{variant:"success",children:[s.delivery_rate.toFixed(1),"% Delivery"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[s.read_rate.toFixed(1),"% Read Rate"]})]})]},s.template_id))})})]}),g.length>0&&e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(x,{children:"Peak Activity Hours"}),e.jsx(u,{children:"Most active hours of the day"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-48 flex items-end justify-between gap-1",children:Array.from({length:24},(s,t)=>{const n=g.find(p=>p.hour===t),o=Math.max(...g.map(p=>p.count),1);return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full bg-gradient-to-t from-blue-500 to-blue-400 rounded-t",style:{height:`${(n?.count||0)/o*100}%`},title:`${t}:00 - ${n?.count||0} messages`}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t%12||12,t>=12?"p":"a"]})]},t)})})})]})]})]})}export{z as default};
