import{r as k,j as e}from"./react-B_HteL0F.js";import{A as I}from"./AppShell-HrBHfcoG.js";import{C as o,c,a as m,b as p,d as h}from"./Card-CUbeq4wI.js";import{B as i}from"./app-C0WBMkkY.js";import{B as L}from"./Topbar-CPirX8py.js";import{T as d}from"./TextInput-79R2a16S.js";import{I as l}from"./InputLabel-BB8AVwyX.js";import{I as y}from"./InputError-BqFzjx5L.js";import{G as H,H as F,l as C,N as M,al as S,ac as R,f as U,e as W}from"./vendor-GYTC5Pip.js";import{u as z}from"./useNotifications-TrBdqubX.js";import"./GlobalFlashHandler-DpywDQft.js";import"./useToast-Rch7lQVh.js";import"./BrandingWrapper-DIBfDp2T.js";/* empty css            */function re({workspace:n,widget:r,connections:f,stats:x,embed:g}){const u=r.slug||r.id,{confirm:T,toast:b}=z(),{data:a,setData:t,put:A,processing:B,errors:j}=H({name:r.name,whatsapp_connection_id:r.whatsapp_connection_id??"",whatsapp_phone:r.whatsapp_phone??"",position:r.position,welcome_message:r.welcome_message??"",theme:{primary:r.theme?.primary??"#25D366",background:r.theme?.background??"#075E54"},show_on:{include:(r.show_on?.include??[]).join(`
`),exclude:(r.show_on?.exclude??[]).join(`
`)},is_active:r.is_active}),[w,N]=k.useState(null);k.useEffect(()=>{if(!a.whatsapp_connection_id)return;const s=f.find(v=>String(v.id)===String(a.whatsapp_connection_id));s?.business_phone&&!a.whatsapp_phone&&t("whatsapp_phone",s.business_phone)},[a.whatsapp_connection_id]);const E=s=>{s.preventDefault(),A(route("app.floaters.update",{workspace:n.slug,widget:u}))},P=()=>{W.post(route("app.floaters.toggle",{workspace:n.slug,widget:u}))},D=async()=>{await T({title:"Delete Widget",message:"Are you sure you want to delete this widget? This action cannot be undone.",variant:"danger"})&&W.delete(route("app.floaters.destroy",{workspace:n.slug,widget:u}),{onSuccess:()=>b.success("Widget deleted"),onError:()=>b.error("Failed to delete widget")})},_=(s,v)=>{navigator.clipboard.writeText(s),N(v),setTimeout(()=>N(null),2e3)};return e.jsxs(I,{children:[e.jsx(F,{title:`Widget Â· ${r.name}`}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(C,{href:route("app.floaters",{workspace:n.slug}),className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-4",children:[e.jsx(M,{className:"h-4 w-4"}),"Back to Widgets"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.name}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Manage widget settings and copy the embed snippet."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{variant:r.is_active?"success":"default",children:r.is_active?"Active":"Paused"}),e.jsx(i,{variant:"secondary",onClick:P,children:r.is_active?"Pause":"Activate"}),e.jsx(i,{variant:"danger",onClick:D,children:"Delete"})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[{label:"Impressions",value:x.impressions},{label:"Clicks",value:x.clicks},{label:"Leads",value:x.leads}].map(s=>e.jsx(o,{className:"border-0 shadow-sm",children:e.jsxs(c,{className:"p-5",children:[e.jsx("p",{className:"text-xs uppercase tracking-wider text-gray-500",children:s.label}),e.jsx("p",{className:"mt-2 text-2xl font-semibold text-gray-900 dark:text-gray-100",children:s.value}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Last 30 days"})]})},s.label))}),e.jsxs(o,{className:"border-0 shadow-lg",children:[e.jsxs(m,{children:[e.jsx(p,{children:"Embed Code"}),e.jsx(h,{children:"Paste this script into your website."})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-900 p-3 text-xs text-gray-600 dark:text-gray-300",children:g.snippet}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(i,{variant:"secondary",onClick:()=>_(g.snippet,"snippet"),children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),w==="snippet"?"Copied":"Copy Snippet"]}),e.jsxs(i,{variant:"secondary",onClick:()=>_(g.script,"script"),children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),w==="script"?"Copied":"Copy Script URL"]})]})]})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs(o,{className:"border-0 shadow-lg",children:[e.jsxs(m,{children:[e.jsx(p,{children:"Widget Details"}),e.jsx(h,{children:"Update widget settings."})]}),e.jsxs(c,{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Widget Name"}),e.jsx(d,{value:a.name,onChange:s=>t("name",s.target.value),className:"mt-1 w-full"}),e.jsx(y,{message:j.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"WhatsApp Connection (optional)"}),e.jsxs("select",{value:a.whatsapp_connection_id,onChange:s=>t("whatsapp_connection_id",s.target.value),className:"mt-1 w-full rounded-xl border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm",children:[e.jsx("option",{value:"",children:"Select connection"}),f.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"WhatsApp Phone"}),e.jsx(d,{value:a.whatsapp_phone,onChange:s=>t("whatsapp_phone",s.target.value),className:"mt-1 w-full"}),e.jsx(y,{message:j.whatsapp_phone,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Welcome Message"}),e.jsx(d,{value:a.welcome_message,onChange:s=>t("welcome_message",s.target.value),className:"mt-1 w-full"}),e.jsx(y,{message:j.welcome_message,className:"mt-2"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Position"}),e.jsxs("select",{value:a.position,onChange:s=>t("position",s.target.value),className:"mt-1 w-full rounded-xl border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm",children:[e.jsx("option",{value:"bottom-right",children:"Bottom right"}),e.jsx("option",{value:"bottom-left",children:"Bottom left"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-6",children:[e.jsx("input",{type:"checkbox",checked:a.is_active,onChange:s=>t("is_active",s.target.checked)}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Widget is active"})]})]})]})]}),e.jsxs(o,{className:"border-0 shadow-lg",children:[e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx(p,{children:"Theme"})]}),e.jsx(h,{children:"Customize the bubble colors."})]}),e.jsxs(c,{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("input",{type:"color",value:a.theme.primary,onChange:s=>t("theme",{...a.theme,primary:s.target.value}),className:"h-10 w-14 rounded-lg border border-gray-200"}),e.jsx(d,{value:a.theme.primary,onChange:s=>t("theme",{...a.theme,primary:s.target.value}),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Header Background"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("input",{type:"color",value:a.theme.background,onChange:s=>t("theme",{...a.theme,background:s.target.value}),className:"h-10 w-14 rounded-lg border border-gray-200"}),e.jsx(d,{value:a.theme.background,onChange:s=>t("theme",{...a.theme,background:s.target.value}),className:"flex-1"})]})]})]})]}),e.jsxs(o,{className:"border-0 shadow-lg",children:[e.jsxs(m,{children:[e.jsx(p,{children:"Page Targeting"}),e.jsx(h,{children:"Show or hide the widget on specific pages (one per line, supports * wildcard)."})]}),e.jsxs(c,{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Show on"}),e.jsx("textarea",{value:a.show_on.include,onChange:s=>t("show_on",{...a.show_on,include:s.target.value}),className:"mt-1 w-full rounded-xl border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm min-h-[120px]",placeholder:`/pricing
/blog/*`})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Hide on"}),e.jsx("textarea",{value:a.show_on.exclude,onChange:s=>t("show_on",{...a.show_on,exclude:s.target.value}),className:"mt-1 w-full rounded-xl border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm min-h-[120px]",placeholder:`/privacy
/terms`})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx(C,{href:route("app.floaters",{workspace:n.slug}),children:e.jsx(i,{variant:"secondary",children:"Cancel"})}),e.jsxs(i,{type:"submit",disabled:B,className:"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})]})}export{re as default};
