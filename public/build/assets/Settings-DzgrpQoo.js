import{r as z,j as e}from"./react-BhzSerM2.js";import{o as G,u as O,m as U,aB as V,ar as H,ay as J,J as Z,_ as K,aG as W,g as X,aH as Y,Z as _,aI as q,A as Q,y as $,a9 as ee,aJ as ae,D as re,aK as se,ab as te}from"./vendor-YQoUUhbX.js";import{P as ie}from"./PlatformShell-Bb_kh9A7.js";import{B as oe}from"./app-DjsbE74r.js";import{u as ne,T as le,a as ce,b as me,c as r}from"./Tabs-BpIUtOMT.js";import{M as de}from"./MisconfiguredSettingsAlert-B-WagvC9.js";import{u as pe}from"./useToast-C37H2DkG.js";import{u as ue}from"./useNotifications-9W-smJed.js";import xe from"./GeneralTab-CLOTLpZp.js";import fe from"./SecurityTab-Ba4rqrhK.js";import be from"./PaymentTab-DrCYFacd.js";import ge from"./IntegrationsTab-DJ-LJKEK.js";import he from"./AnalyticsTab-C5UH8Roe.js";import je from"./ComplianceTab-D0Bip4eb.js";import ye from"./PerformanceTab-dMrB2CdT.js";import ve from"./FeaturesTab-D7RFt7HW.js";import Te from"./PusherTab-DBsSpNG7.js";import Se from"./MailTab-CUO85snq.js";import we from"./StorageTab-BkDdV3YN.js";import Pe from"./BrandingTab-r-2xo6pF.js";import Ne from"./AiTab-BNQGOroA.js";import ke from"./SupportTab-BW7QFOvc.js";import Ce from"./CronTab-BZp3eu0S.js";import Ae from"./DeliveryTab-LP6H7Wan.js";import"./Topbar-D6SeU-QE.js";import"./Badge-C6d-QEGL.js";import"./BrandingWrapper-Djq-D_tN.js";import"./GlobalFlashHandler-DjMhmIiM.js";/* empty css            */import"./Alert-u60ICsin.js";import"./Card-CRSrZ5HZ.js";import"./TextInput-DRXLElIV.js";import"./InputLabel-qVeuR0hO.js";import"./InputError-6mWSc7R2.js";import"./Input-DoFFSnqy.js";import"./Label-CVvmGNuW.js";import"./Switch-D0Y76KuR.js";function ua({pusher:x,mail:f,storage:b,general:g,security:h,payment:m,integrations:j,analytics:y,compliance:v,performance:T,features:S,branding:w,ai:P,whatsapp:N,support:k,cron:C,delivery:A,misconfigured_settings:n}){const{auth:D}=G().props,B=()=>typeof window<"u"&&new URLSearchParams(window.location.search).get("tab")||"general",{value:l,setValue:c}=ne(B());z.useEffect(()=>{if(typeof window<"u"){const i=new URLSearchParams(window.location.search).get("tab");i&&i!==l&&c(i)}},[l,c]);const{addToast:E}=pe(),{confirm:F}=ue(),{data:s,setData:t,post:I,processing:d,errors:a}=O({general:g||{},security:h||{},payment:m||{},integrations:j||{},analytics:y||{},compliance:v||{},performance:T||{},features:S||{},pusher:x||{},mail:f||{},storage:b||{},branding:w||{},ai:P||{},whatsapp:N||{},support:k||{}}),M=async o=>{o.preventDefault();const i=m||{},L=s.payment||{};i.razorpay_enabled&&!L.razorpay_enabled&&!await F({title:"Disable Razorpay?",message:"You are about to disable Razorpay. This will prevent users from making payments. Are you sure?",variant:"warning"})||I(route("platform.settings.update"),{preserveScroll:!1,forceFormData:!0,only:["general","security","payment","integrations","analytics","compliance","performance","features","pusher","mail","storage","branding","ai","whatsapp","support","flash"],onError:p=>{const u=Object.values(p).flat();E({title:"Error Saving Settings",description:u.length>0?u[0]:"Failed to save settings. Please try again.",variant:"error"})}})},R=[{id:"general",label:"General",icon:V},{id:"support",label:"Support",icon:H},{id:"branding",label:"Branding",icon:J},{id:"security",label:"Security",icon:Z},{id:"payment",label:"Payment",icon:K},{id:"integrations",label:"Integrations",icon:W},{id:"analytics",label:"Analytics",icon:X},{id:"compliance",label:"Compliance",icon:Y},{id:"performance",label:"Performance",icon:_},{id:"cron",label:"Cron",icon:q},{id:"delivery",label:"Delivery",icon:Q},{id:"features",label:"Features",icon:$},{id:"ai",label:"AI",icon:ee},{id:"pusher",label:"Pusher",icon:ae},{id:"mail",label:"Mail",icon:re},{id:"storage",label:"Storage",icon:se}];return e.jsx(ie,{auth:D,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Platform Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Configure all platform-wide settings and integrations"})]}),n&&n.length>0&&e.jsx(de,{misconfiguredSettings:n,variant:"settings"}),Object.keys(a).length>0&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(U,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-1",children:"Validation Errors"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 dark:text-red-300 space-y-1",children:Object.entries(a).map(([o,i])=>e.jsx("li",{children:Array.isArray(i)?i.join(", "):i},o))})]})]})}),e.jsxs(le,{value:l,onValueChange:c,children:[e.jsx(ce,{className:"w-full justify-start mb-6 overflow-x-auto",children:R.map(o=>{const i=o.icon;return e.jsxs(me,{value:o.id,children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),o.label]},o.id)})}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsx(r,{value:"general",children:e.jsx(xe,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"support",children:e.jsx(ke,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"branding",children:e.jsx(Pe,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"security",children:e.jsx(fe,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"payment",children:e.jsx(be,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"integrations",children:e.jsx(ge,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"analytics",children:e.jsx(he,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"compliance",children:e.jsx(je,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"performance",children:e.jsx(ye,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"features",children:e.jsx(ve,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"cron",children:e.jsx(Ce,{cron:C})}),e.jsx(r,{value:"delivery",children:e.jsx(Ae,{delivery:A})}),e.jsx(r,{value:"pusher",children:e.jsx(Te,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"ai",children:e.jsx(Ne,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"mail",children:e.jsx(Se,{data:s,setData:t,errors:a})}),e.jsx(r,{value:"storage",children:e.jsx(we,{data:s,setData:t,errors:a})}),e.jsx("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-800",children:e.jsxs(oe,{type:"submit",disabled:d,children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),d?"Saving...":"Save All Settings"]})})]})]})]})})}export{ua as default};
