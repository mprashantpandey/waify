import{r as c,j as e}from"./react-B_HteL0F.js";import{H as B,l as m,F as g,aP as C,ab as H,aa as L,X as P,$ as R,al as z,am as U,aY as Y,Z,k as G,aZ as K,B as V,e as l}from"./vendor-GYTC5Pip.js";import{A as W}from"./AppShell-HrBHfcoG.js";import{C as h,a as O,b as X,c as p}from"./Card-CUbeq4wI.js";import{B as u}from"./Topbar-CPirX8py.js";import{u as q,B as t}from"./app-C0WBMkkY.js";import{E as J}from"./EmptyState-CnH4x0_1.js";import{T as Q}from"./TextInput-79R2a16S.js";import{u as ee}from"./useToast-Rch7lQVh.js";import"./GlobalFlashHandler-DpywDQft.js";import"./BrandingWrapper-DIBfDp2T.js";/* empty css            */function ge({workspace:r,templates:y,connections:b,filters:T}){const{toast:o}=ee(),j=q(),[s,n]=c.useState(T),[x,S]=c.useState(!1),[A,f]=c.useState(null),[F,v]=c.useState(null),[E,N]=c.useState(null),w=()=>{l.get(route("app.whatsapp.templates.index",{workspace:r.slug}),s,{preserveState:!0,preserveScroll:!0})},M=()=>{const a={connection:"",status:"",category:"",language:"",search:""};n(a),l.get(route("app.whatsapp.templates.index",{workspace:r.slug}),a)},_=(a,i)=>{const d=`${a}:${i}`;navigator.clipboard.writeText(d),f(d),o.success("Template name copied"),setTimeout(()=>f(null),2e3)},k=()=>{l.post(route("app.whatsapp.templates.sync",{workspace:r.slug}),{connection_id:s.connection||b[0]?.id},{onSuccess:()=>{o.success("Templates synced successfully"),l.reload({only:["templates"]})},onError:()=>{o.error("Failed to sync templates")}})},D=async a=>{await j({title:"Archive Template",message:`Are you sure you want to archive "${a.name}"? You can restore it later.`,variant:"warning"})&&(v(a.slug),l.post(route("app.whatsapp.templates.archive",{workspace:r.slug,template:a.slug}),{},{onSuccess:()=>{o.success("Template archived successfully"),l.reload({only:["templates"]})},onError:()=>{o.error("Failed to archive template")},onFinish:()=>v(null)}))},I=async a=>{await j({title:"Delete Template",message:`Are you sure you want to permanently delete "${a.name}"? This action cannot be undone.`,variant:"danger",confirmText:"Delete"})&&(N(a.slug),l.delete(route("app.whatsapp.templates.destroy",{workspace:r.slug,template:a.slug}),{onSuccess:()=>{o.success("Template deleted successfully"),l.reload({only:["templates"]})},onError:()=>{o.error("Failed to delete template")},onFinish:()=>N(null)}))},$=a=>{const d={approved:{variant:"success",label:"Approved"},pending:{variant:"warning",label:"Pending"},rejected:{variant:"danger",label:"Rejected"},paused:{variant:"default",label:"Paused"},disabled:{variant:"default",label:"Disabled"}}[a.toLowerCase()]||{variant:"default",label:a};return e.jsx(u,{variant:d.variant,className:"px-3 py-1",children:d.label})};return e.jsxs(W,{children:[e.jsx(B,{title:"Message Templates"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Message Templates"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Manage your WhatsApp message templates"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{href:route("app.whatsapp.templates.create",{workspace:r.slug}),children:e.jsxs(t,{className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/50",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Create Template"]})}),e.jsxs(t,{onClick:k,variant:"secondary",className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 shadow-lg shadow-green-500/50",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Sync from Meta"]})]})]}),e.jsxs(h,{className:"border-0 shadow-lg",children:[e.jsx(O,{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(X,{className:"flex items-center gap-2 text-lg font-bold",children:[e.jsx(H,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Filters"]}),e.jsxs("button",{onClick:()=>S(!x),className:"text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:[x?"Hide":"Show"," Filters"]})]})}),x&&e.jsxs(p,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Q,{type:"text",value:s.search,onChange:a=>n({...s,search:a.target.value}),onKeyDown:a=>a.key==="Enter"&&w(),className:"pl-10 rounded-xl",placeholder:"Search templates..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Connection"}),e.jsxs("select",{value:s.connection,onChange:a=>n({...s,connection:a.target.value}),className:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 px-4 py-2.5",children:[e.jsx("option",{value:"",children:"All Connections"}),b.map(a=>e.jsx("option",{value:a.id.toString(),children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:s.status,onChange:a=>n({...s,status:a.target.value}),className:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 px-4 py-2.5",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs("select",{value:s.category,onChange:a=>n({...s,category:a.target.value}),className:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 px-4 py-2.5",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"MARKETING",children:"Marketing"}),e.jsx("option",{value:"UTILITY",children:"Utility"}),e.jsx("option",{value:"AUTHENTICATION",children:"Authentication"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsx(t,{onClick:w,className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/50 rounded-xl",children:"Apply Filters"}),e.jsxs(t,{onClick:M,variant:"secondary",className:"rounded-xl",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})]}),y.data.length===0?e.jsx(h,{className:"border-0 shadow-xl",children:e.jsx(p,{className:"py-16",children:e.jsx(J,{icon:g,title:"No templates found",description:"Sync templates from Meta to import your WhatsApp message templates.",action:e.jsxs(t,{onClick:k,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 shadow-lg shadow-green-500/50",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Sync Templates"]})})})}):e.jsx(h,{className:"border-0 shadow-lg",children:e.jsx(p,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Template"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Language"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Variables"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Connection"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:y.data.map(a=>e.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-blue-100 dark:hover:from-blue-900/10 dark:hover:to-blue-800/10 transition-all duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:e.jsx(g,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:a.name}),a.body_text&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs mt-0.5",children:[a.body_text.substring(0,60),a.body_text.length>60?"...":""]})]}),e.jsx("button",{onClick:()=>_(a.name,a.language),className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:A===`${a.name}:${a.language}`?e.jsx(R,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):e.jsx(z,{className:"h-4 w-4 text-gray-400"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(U,{className:"h-3.5 w-3.5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:a.language})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs(u,{variant:"default",className:"px-3 py-1",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),a.category]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$(a.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.variable_count>0?e.jsxs(u,{variant:"info",className:"px-3 py-1",children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),a.variable_count]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"â€”"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:a.connection.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(m,{href:route("app.whatsapp.templates.show",{workspace:r.slug,template:a.slug}),children:e.jsx(t,{variant:"ghost",size:"sm",className:"rounded-lg",children:"View"})}),e.jsx(m,{href:route("app.whatsapp.templates.send",{workspace:r.slug,template:a.slug}),children:e.jsxs(t,{size:"sm",className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-lg",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),"Send"]})}),e.jsx(t,{variant:"ghost",size:"sm",className:"rounded-lg text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:hover:bg-orange-900/20",onClick:()=>D(a),disabled:F===a.slug,children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(t,{variant:"ghost",size:"sm",className:"rounded-lg text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:()=>I(a),disabled:E===a.slug,children:e.jsx(V,{className:"h-4 w-4"})})]})})]},a.id))})]})})})})]})]})}export{ge as default};
